/*
 zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License  zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License  Copyright (c) 2013 Autodesk Inc. */
var IS_CONCAT_BUILD=!0,BUILD_LMV_WORKER_URL="lmvworker.js",LMV_WORKER_URL=BUILD_LMV_WORKER_URL,ENABLE_DEBUG=!1,ENABLE_TRACE=!1,ENABLE_INLINE_WORKER=!0;AutodeskNamespace=function(a){var b=this;a=a.split(".");for(var c=0;c<a.length;++c)b[a[c]]=b[a[c]]||{},b=b[a[c]];return b};var _isIE11=!!navigator.userAgent.match(/Trident\/7\./);
"undefined"!==typeof window&&_isIE11&&function(){function a(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var e=document.createEvent("CustomEvent");e.initCustomEvent(a,c.bubbles,c.cancelable,c.detail);return e}a.prototype=window.CustomEvent.prototype;window.CustomEvent=a}();
ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,b){!b||b>this.byteLength?b=this.byteLength:0>b&&(b=this.byteLength+b,0>b&&(b=0));0>a&&(a=this.byteLength+a,0>a&&(a=0));if(b<=a)return new ArrayBuffer;for(var c=b-a,e=new Uint8Array(this,a,c),d=new Uint8Array(c),f=0;f<c;f++)d[f]=e[f];return d.buffer});"undefined"!==typeof window&&(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);
function launchFullscreen(a,b){a.requestFullscreen?a.requestFullscreen(b):a.mozRequestFullScreen?a.mozRequestFullScreen(b):a.webkitRequestFullscreen?a.webkitRequestFullscreen(b):a.msRequestFullscreen&&a.msRequestFullscreen(b)}function exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}
function inFullscreen(){return document.fullscreenEnabled||document.mozFullScreenElement||document.webkitIsFullScreen||document.msFullscreenElement?!0:!1}function fullscreenElement(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}function isFullscreenAvailable(a){return a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||a.msRequestFullscreen}
function getAndroidVersion(a){a=a||navigator.userAgent;return(a=a.match(/Android\s([0-9\.]*)/))?a[1]:!1}function isTouchDevice(){return"ontouchstart"in window}function isIOSDevice(){return/ip(ad|hone|od)/.test(navigator.userAgent.toLowerCase())}function isAndroidDevice(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")}function touchStartToClick(a){a.preventDefault();a.stopPropagation();a.target.click()}
LmvMatrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};
LmvMatrix4.prototype={constructor:LmvMatrix4,set:function(a,b,c,e,d,f,g,l,h,k,m,p,r,n,q,u){var s=this.elements;s[0]=a;s[4]=b;s[8]=c;s[12]=e;s[1]=d;s[5]=f;s[9]=g;s[13]=l;s[2]=h;s[6]=k;s[10]=m;s[14]=p;s[3]=r;s[7]=n;s[11]=q;s[15]=u;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,e=a.y,d=a.z,f=a.w,g=c+c,l=e+e,h=d+d;a=c*g;var k=c*l,c=c*h,m=
e*l,e=e*h,d=d*h,g=f*g,l=f*l,f=f*h;b[0]=1-(m+d);b[4]=k-f;b[8]=c+l;b[1]=k+f;b[5]=1-(a+d);b[9]=e-g;b[2]=c-l;b[6]=e+g;b[10]=1-(a+m);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},multiply:function(a){return this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,e=b.elements,d=this.elements,f=c[0],g=c[4],l=c[8],h=c[12],k=c[1],m=c[5],p=c[9],r=c[13],n=c[2],q=c[6],u=c[10],s=c[14],t=c[3],x=c[7],y=c[11],c=c[15],z=e[0],A=e[4],G=e[8],C=e[12],E=e[1],D=e[5],F=e[9],J=
e[13],K=e[2],H=e[6],I=e[10],B=e[14],v=e[3],w=e[7],L=e[11],e=e[15];d[0]=f*z+g*E+l*K+h*v;d[4]=f*A+g*D+l*H+h*w;d[8]=f*G+g*F+l*I+h*L;d[12]=f*C+g*J+l*B+h*e;d[1]=k*z+m*E+p*K+r*v;d[5]=k*A+m*D+p*H+r*w;d[9]=k*G+m*F+p*I+r*L;d[13]=k*C+m*J+p*B+r*e;d[2]=n*z+q*E+u*K+s*v;d[6]=n*A+q*D+u*H+s*w;d[10]=n*G+q*F+u*I+s*L;d[14]=n*C+q*J+u*B+s*e;d[3]=t*z+x*E+y*K+c*v;d[7]=t*A+x*D+y*H+c*w;d[11]=t*G+x*F+y*I+c*L;d[15]=t*C+x*J+y*B+c*e;return this},multiplyToArray:function(a,b,c){var e=this.elements;this.multiplyMatrices(a,b);c[0]=
e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];c[6]=e[6];c[7]=e[7];c[8]=e[8];c[9]=e[9];c[10]=e[10];c[11]=e[11];c[12]=e[12];c[13]=e[13];c[14]=e[14];c[15]=e[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[4],e=a[8],d=a[12],f=a[1],g=a[5],l=a[9],h=a[13],k=a[2],m=a[6],p=a[10],r=a[14];
return a[3]*(+d*l*m-e*h*m-d*g*p+c*h*p+e*g*r-c*l*r)+a[7]*(+b*l*r-b*h*p+d*f*p-e*f*r+e*h*k-d*l*k)+a[11]*(+b*h*m-b*g*r-d*f*m+c*f*r+d*g*k-c*h*k)+a[15]*(-e*g*k-b*l*m+b*g*p+e*f*m-c*f*p+c*l*k)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=
c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,e=a.elements,d=e[0],f=e[4],g=e[8],l=e[12],h=e[1],k=e[5],m=e[9],p=e[13],r=e[2],n=e[6],q=e[10],u=e[14],s=e[3],t=e[7],x=e[11],e=e[15];c[0]=m*u*t-p*q*t+p*n*x-k*u*x-m*n*e+k*q*e;c[4]=l*q*t-g*u*t-l*n*x+f*u*x+g*n*e-f*q*
e;c[8]=g*p*t-l*m*t+l*k*x-f*p*x-g*k*e+f*m*e;c[12]=l*m*n-g*p*n-l*k*q+f*p*q+g*k*u-f*m*u;c[1]=p*q*s-m*u*s-p*r*x+h*u*x+m*r*e-h*q*e;c[5]=g*u*s-l*q*s+l*r*x-d*u*x-g*r*e+d*q*e;c[9]=l*m*s-g*p*s-l*h*x+d*p*x+g*h*e-d*m*e;c[13]=g*p*r-l*m*r+l*h*q-d*p*q-g*h*u+d*m*u;c[2]=k*u*s-p*n*s+p*r*t-h*u*t-k*r*e+h*n*e;c[6]=l*n*s-f*u*s-l*r*t+d*u*t+f*r*e-d*n*e;c[10]=f*p*s-l*k*s+l*h*t-d*p*t-f*h*e+d*k*e;c[14]=l*k*r-f*p*r-l*h*n+d*p*n+f*h*u-d*k*u;c[3]=m*n*s-k*q*s-m*r*t+h*q*t+k*r*x-h*n*x;c[7]=f*q*s-g*n*s+g*r*t-d*q*t-f*r*x+d*n*x;c[11]=
g*k*s-f*m*s-g*h*t+d*m*t+f*h*x-d*k*x;c[15]=f*m*r-g*k*r+g*h*n-d*m*n-f*h*q+d*k*q;c=d*c[0]+h*c[4]+r*c[8]+s*c[12];if(0==c){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},scale:function(a){var b=this.elements,c=a.x,e=a.y;a=a.z;b[0]*=c;b[4]*=e;b[8]*=a;b[1]*=c;b[5]*=e;b[9]*=a;b[2]*=c;b[6]*=e;b[10]*=a;b[3]*=c;b[7]*=e;b[11]*=a;return this},
makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),e=Math.sin(b),d=1-c,f=a.x,
g=a.y,l=a.z,h=d*f,k=d*g;this.set(h*f+c,h*g-e*l,h*l+e*g,0,h*g+e*l,k*g+c,k*l-e*f,0,h*l-e*g,k*l+e*f,d*l*l+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},transformPoint:function(a){var b=a.x,c=a.y,e=a.z,d=this.elements;a.x=d[0]*b+d[4]*c+d[8]*e+d[12];a.y=d[1]*b+d[5]*c+d[9]*e+d[13];a.z=d[2]*b+d[6]*c+d[10]*e+d[14];return a},transformDirection:function(a){var b=
a.x,c=a.y,e=a.z,d=this.elements;a.x=d[0]*b+d[4]*c+d[8]*e;a.y=d[1]*b+d[5]*c+d[9]*e;a.z=d[2]*b+d[6]*c+d[10]*e;b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z);0<b&&(b=1/b,a.x*=b,a.y*=b,a.z*=b);return a},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){return(new LmvMatrix4).fromArray(this.elements)}};
(function(){function a(a){throw a;}function b(a,b){var c=a.split("."),e=p;c[0]in e||!e.execScript||e.execScript("var "+c[0]);for(var d;c.length&&(d=c.shift());)c.length||b===m?e=e[d]?e[d]:e[d]={}:e[d]=b}function c(a,b,c){var e="number"===typeof b?b:b=0,d="number"===typeof c?c:a.length;c=-1;for(e=d&7;e--;++b)c=c>>>8^s[(c^a[b])&255];for(e=d>>3;e--;b+=8)c=c>>>8^s[(c^a[b])&255],c=c>>>8^s[(c^a[b+1])&255],c=c>>>8^s[(c^a[b+2])&255],c=c>>>8^s[(c^a[b+3])&255],c=c>>>8^s[(c^a[b+4])&255],c=c>>>8^s[(c^a[b+5])&
255],c=c>>>8^s[(c^a[b+6])&255],c=c>>>8^s[(c^a[b+7])&255];return(c^4294967295)>>>0}function e(){}function d(a){var b=a.length,c=0,e=Number.POSITIVE_INFINITY,d,g,v,f,h,k,l,m,n;for(m=0;m<b;++m)a[m]>c&&(c=a[m]),a[m]<e&&(e=a[m]);d=1<<c;g=new (r?Uint32Array:Array)(d);v=1;f=0;for(h=2;v<=c;){for(m=0;m<b;++m)if(a[m]===v){k=0;l=f;for(n=0;n<v;++n)k=k<<1|l&1,l>>=1;for(n=k;n<d;n+=h)g[n]=v<<16|m;++f}++v;f<<=1;h<<=1}return[g,c,e]}function f(b,c){this.i=[];this.j=32768;this.d=this.f=this.c=this.n=0;this.input=r?
new Uint8Array(b):b;this.o=!1;this.k=x;this.w=!1;if(c||!(c={}))c.index&&(this.c=c.index),c.bufferSize&&(this.j=c.bufferSize),c.bufferType&&(this.k=c.bufferType),c.resize&&(this.w=c.resize);switch(this.k){case t:this.a=32768;this.b=new (r?Uint8Array:Array)(32768+this.j+258);break;case x:this.a=0;this.b=new (r?Uint8Array:Array)(this.j);this.e=this.D;this.q=this.A;this.l=this.C;break;default:a(Error("invalid inflate mode"))}}function g(b,c){for(var e=b.f,d=b.d,g=b.input,f=b.c,v;d<c;)v=g[f++],v===m&&
a(Error("input buffer is broken")),e|=v<<d,d+=8;b.f=e>>>c;b.d=d-c;b.c=f;return e&(1<<c)-1}function l(a,b){for(var c=a.f,e=a.d,d=a.input,g=a.c,f=b[0],w=b[1],h;e<w;){h=d[g++];if(h===m)break;c|=h<<e;e+=8}d=f[c&(1<<w)-1];f=d>>>16;a.f=c>>f;a.d=e-f;a.c=g;return d&65535}function h(a){function b(a,c,e){var d,f,v,h;for(h=0;h<a;)switch(d=l(this,c),d){case 16:for(v=3+g(this,2);v--;)e[h++]=f;break;case 17:for(v=3+g(this,3);v--;)e[h++]=0;f=0;break;case 18:for(v=11+g(this,7);v--;)e[h++]=0;f=0;break;default:f=e[h++]=
d}return e}var c=g(a,5)+257,e=g(a,5)+1,f=g(a,4)+4,h=new (r?Uint8Array:Array)(y.length),v;for(v=0;v<f;++v)h[y[v]]=g(a,3);f=d(h);h=new (r?Uint8Array:Array)(c);v=new (r?Uint8Array:Array)(e);a.l(d(b.call(a,c,f,h)),d(b.call(a,e,f,v)))}function k(a){this.input=a;this.c=0;this.m=[];this.s=!1}var m=void 0,p=this,r="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;new (r?Uint8Array:Array)(256);var n;for(n=0;256>n;++n)for(var q=n,u=7,q=q>>>1;q;q>>>=1)--u;n=
[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,
651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,
4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,
167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,
3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,
2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];var s=r?new Uint32Array(n):n;e.prototype.getName=function(){return this.name};e.prototype.getData=function(){return this.data};e.prototype.G=function(){return this.H};b("Zlib.GunzipMember",e);b("Zlib.GunzipMember.prototype.getName",e.prototype.getName);b("Zlib.GunzipMember.prototype.getData",
e.prototype.getData);b("Zlib.GunzipMember.prototype.getMtime",e.prototype.G);n=[];for(q=0;288>q;q++)switch(!0){case 143>=q:n.push([q+48,8]);break;case 255>=q:n.push([q-144+400,9]);break;case 279>=q:n.push([q-256+0,7]);break;case 287>=q:n.push([q-280+192,8]);break;default:a("invalid literal: "+q)}n=function(){function b(c){switch(!0){case 3===c:return[257,c-3,0];case 4===c:return[258,c-4,0];case 5===c:return[259,c-5,0];case 6===c:return[260,c-6,0];case 7===c:return[261,c-7,0];case 8===c:return[262,
c-8,0];case 9===c:return[263,c-9,0];case 10===c:return[264,c-10,0];case 12>=c:return[265,c-11,1];case 14>=c:return[266,c-13,1];case 16>=c:return[267,c-15,1];case 18>=c:return[268,c-17,1];case 22>=c:return[269,c-19,2];case 26>=c:return[270,c-23,2];case 30>=c:return[271,c-27,2];case 34>=c:return[272,c-31,2];case 42>=c:return[273,c-35,3];case 50>=c:return[274,c-43,3];case 58>=c:return[275,c-51,3];case 66>=c:return[276,c-59,3];case 82>=c:return[277,c-67,4];case 98>=c:return[278,c-83,4];case 114>=c:return[279,
c-99,4];case 130>=c:return[280,c-115,4];case 162>=c:return[281,c-131,5];case 194>=c:return[282,c-163,5];case 226>=c:return[283,c-195,5];case 257>=c:return[284,c-227,5];case 258===c:return[285,c-258,0];default:a("invalid length: "+c)}}var c=[],e,d;for(e=3;258>=e;e++)d=b(e),c[e]=d[2]<<24|d[1]<<16|d[0];return c}();r&&new Uint32Array(n);var t=0,x=1;f.prototype.g=function(){for(;!this.o;){var b=g(this,3);b&1&&(this.o=!0);b>>>=1;switch(b){case 0:var b=this.input,c=this.c,e=this.b,d=this.a,f=m,k=m,v=m,w=
e.length,f=m;this.d=this.f=0;f=b[c++];f===m&&a(Error("invalid uncompressed block header: LEN (first byte)"));k=f;f=b[c++];f===m&&a(Error("invalid uncompressed block header: LEN (second byte)"));k|=f<<8;f=b[c++];f===m&&a(Error("invalid uncompressed block header: NLEN (first byte)"));v=f;f=b[c++];f===m&&a(Error("invalid uncompressed block header: NLEN (second byte)"));v|=f<<8;k===~v&&a(Error("invalid uncompressed block header: length verify"));c+k>b.length&&a(Error("input buffer is broken"));switch(this.k){case t:for(;d+
k>e.length;){f=w-d;k-=f;if(r)e.set(b.subarray(c,c+f),d),d+=f,c+=f;else for(;f--;)e[d++]=b[c++];this.a=d;e=this.e();d=this.a}break;case x:for(;d+k>e.length;)e=this.e({t:2});break;default:a(Error("invalid inflate mode"))}if(r)e.set(b.subarray(c,c+k),d),d+=k,c+=k;else for(;k--;)e[d++]=b[c++];this.c=c;this.a=d;this.b=e;break;case 1:this.l(E,D);break;case 2:h(this);break;default:a(Error("unknown BTYPE: "+b))}}return this.q()};n=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var y=r?new Uint16Array(n):
n;n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258];var z=r?new Uint16Array(n):n;n=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0];var A=r?new Uint8Array(n):n;n=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var G=r?new Uint16Array(n):n;n=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var C=r?new Uint8Array(n):n;n=new (r?Uint8Array:Array)(288);q=
0;for(u=n.length;q<u;++q)n[q]=143>=q?8:255>=q?9:279>=q?7:8;var E=d(n);n=new (r?Uint8Array:Array)(30);q=0;for(u=n.length;q<u;++q)n[q]=5;var D=d(n);f.prototype.l=function(a,b){var c=this.b,e=this.a;this.r=a;for(var d=c.length-258,f,v,h;256!==(f=l(this,a));)if(256>f)e>=d&&(this.a=e,c=this.e(),e=this.a),c[e++]=f;else for(f-=257,h=z[f],0<A[f]&&(h+=g(this,A[f])),f=l(this,b),v=G[f],0<C[f]&&(v+=g(this,C[f])),e>=d&&(this.a=e,c=this.e(),e=this.a);h--;)c[e]=c[e++-v];for(;8<=this.d;)this.d-=8,this.c--;this.a=
e};f.prototype.C=function(a,b){var c=this.b,e=this.a;this.r=a;for(var d=c.length,f,v,h;256!==(f=l(this,a));)if(256>f)e>=d&&(c=this.e(),d=c.length),c[e++]=f;else for(f-=257,h=z[f],0<A[f]&&(h+=g(this,A[f])),f=l(this,b),v=G[f],0<C[f]&&(v+=g(this,C[f])),e+h>d&&(c=this.e(),d=c.length);h--;)c[e]=c[e++-v];for(;8<=this.d;)this.d-=8,this.c--;this.a=e};f.prototype.e=function(){var a=new (r?Uint8Array:Array)(this.a-32768),b=this.a-32768,c,e,d=this.b;if(r)a.set(d.subarray(32768,a.length));else for(c=0,e=a.length;c<
e;++c)a[c]=d[c+32768];this.i.push(a);this.n+=a.length;if(r)d.set(d.subarray(b,b+32768));else for(c=0;32768>c;++c)d[c]=d[b+c];this.a=32768;return d};f.prototype.D=function(a){var b,c=this.input.length/this.c+1|0,e,d,f,g=this.input,h=this.b;a&&("number"===typeof a.t&&(c=a.t),"number"===typeof a.z&&(c+=a.z));2>c?(e=(g.length-this.c)/this.r[2],f=e/2*258|0,d=f<h.length?h.length+f:h.length<<1):d=h.length*c;r?(b=new Uint8Array(d),b.set(h)):b=h;return this.b=b};f.prototype.q=function(){var a=0,b=this.b,c=
this.i,e,d=new (r?Uint8Array:Array)(this.n+(this.a-32768)),f,g,h,k;if(0===c.length)return r?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);f=0;for(g=c.length;f<g;++f)for(e=c[f],h=0,k=e.length;h<k;++h)d[a++]=e[h];f=32768;for(g=this.a;f<g;++f)d[a++]=b[f];this.i=[];return this.buffer=d};f.prototype.A=function(){var a,b=this.a;r?this.w?(a=new Uint8Array(b),a.set(this.b.subarray(0,b))):a=this.b.subarray(0,b):(this.b.length>b&&(this.b.length=b),a=this.b);return this.buffer=a};k.prototype.F=function(){this.s||
this.g();return this.m.slice()};k.prototype.g=function(){for(var b=this.input.length;this.c<b;){var d=new e,g=m,h=m,k=m,l=g=k=m,v=m,g=g=m,w=this.input,h=this.c;d.u=w[h++];d.v=w[h++];31===d.u&&139===d.v||a(Error("invalid file signature:"+d.u+","+d.v));d.p=w[h++];switch(d.p){case 8:break;default:a(Error("unknown compression method: "+d.p))}d.h=w[h++];g=w[h++]|w[h++]<<8|w[h++]<<16|w[h++]<<24;d.H=new Date(1E3*g);d.N=w[h++];d.M=w[h++];0<(d.h&4)&&(d.I=w[h++]|w[h++]<<8,h+=d.I);if(0<(d.h&8)){v=[];for(l=0;0<
(g=w[h++]);)v[l++]=String.fromCharCode(g);d.name=v.join("")}if(0<(d.h&16)){v=[];for(l=0;0<(g=w[h++]);)v[l++]=String.fromCharCode(g);d.J=v.join("")}0<(d.h&2)&&(d.B=c(w,0,h)&65535,d.B!==(w[h++]|w[h++]<<8)&&a(Error("invalid header crc16")));g=w[w.length-4]|w[w.length-3]<<8|w[w.length-2]<<16|w[w.length-1]<<24;w.length-h-4-4<512*g&&(k=g);h=new f(w,{index:h,bufferSize:k});d.data=k=h.g();h=h.c;d.K=g=(w[h++]|w[h++]<<8|w[h++]<<16|w[h++]<<24)>>>0;c(k,m,m)!==g&&a(Error("invalid CRC-32 checksum: 0x"+c(k,m,m).toString(16)+
" / 0x"+g.toString(16)));d.L=g=(w[h++]|w[h++]<<8|w[h++]<<16|w[h++]<<24)>>>0;(k.length&4294967295)!==g&&a(Error("invalid input size: "+(k.length&4294967295)+" / "+g));this.m.push(d);this.c=h}this.s=!0;b=this.m;d=k=h=0;for(w=b.length;d<w;++d)k+=b[d].data.length;if(r)for(k=new Uint8Array(k),d=0;d<w;++d)k.set(b[d].data,h),h+=b[d].data.length;else{k=[];for(d=0;d<w;++d)k[d]=b[d].data;k=Array.prototype.concat.apply([],k)}return k};b("Zlib.Gunzip",k);b("Zlib.Gunzip.prototype.decompress",k.prototype.g);b("Zlib.Gunzip.prototype.getMembers",
k.prototype.F)}).call(this);
(function(){function a(a){throw a;}function b(a,b){var c=a.split("."),e=u;c[0]in e||!e.execScript||e.execScript("var "+c[0]);for(var d;c.length&&(d=c.shift());)c.length||b===n?e=e[d]?e[d]:e[d]={}:e[d]=b}function c(a){var b=a.length,c=0,e=Number.POSITIVE_INFINITY,d,f,h,g,k,l,m,n,r;for(n=0;n<b;++n)a[n]>c&&(c=a[n]),a[n]<e&&(e=a[n]);d=1<<c;f=new (s?Uint32Array:Array)(d);h=1;g=0;for(k=2;h<=c;){for(n=0;n<b;++n)if(a[n]===h){l=0;m=g;for(r=0;r<h;++r)l=l<<1|m&1,m>>=1;for(r=l;r<d;r+=k)f[r]=h<<16|n;++g}++h;g<<=
1;k<<=1}return[f,c,e]}function e(b,c){this.l=[];this.m=32768;this.d=this.f=this.c=this.t=0;this.input=s?new Uint8Array(b):b;this.u=!1;this.n=A;this.K=!1;if(c||!(c={}))c.index&&(this.c=c.index),c.bufferSize&&(this.m=c.bufferSize),c.bufferType&&(this.n=c.bufferType),c.resize&&(this.K=c.resize);switch(this.n){case z:this.a=32768;this.b=new (s?Uint8Array:Array)(32768+this.m+258);break;case A:this.a=0;this.b=new (s?Uint8Array:Array)(this.m);this.e=this.W;this.B=this.R;this.q=this.V;break;default:a(Error("invalid inflate mode"))}}
function d(b,c){for(var e=b.f,d=b.d,f=b.input,h=b.c,g;d<c;)g=f[h++],g===n&&a(Error("input buffer is broken")),e|=g<<d,d+=8;b.f=e>>>c;b.d=d-c;b.c=h;return e&(1<<c)-1}function f(a,b){for(var c=a.f,e=a.d,d=a.input,f=a.c,h=b[0],g=b[1],k;e<g;){k=d[f++];if(k===n)break;c|=k<<e;e+=8}d=h[c&(1<<g)-1];h=d>>>16;a.f=c>>h;a.d=e-h;a.c=f;return d&65535}function g(a){function b(a,c,e){var h,g,k,l;for(l=0;l<a;)switch(h=f(this,c),h){case 16:for(k=3+d(this,2);k--;)e[l++]=g;break;case 17:for(k=3+d(this,3);k--;)e[l++]=
0;g=0;break;case 18:for(k=11+d(this,7);k--;)e[l++]=0;g=0;break;default:g=e[l++]=h}return e}var e=d(a,5)+257,h=d(a,5)+1,g=d(a,4)+4,k=new (s?Uint8Array:Array)(G.length),l;for(l=0;l<g;++l)k[G[l]]=d(a,3);g=c(k);k=new (s?Uint8Array:Array)(e);l=new (s?Uint8Array:Array)(h);a.q(c(b.call(a,e,g,k)),c(b.call(a,h,g,l)))}function l(a){a=a||{};this.files=[];this.v=a.comment}function h(a,b){b=b||{};this.input=s&&a instanceof Array?new Uint8Array(a):a;this.c=0;this.ba=b.verify||!1;this.j=b.password}function k(a,
b){this.input=a;this.offset=b}function m(a,b){this.input=a;this.offset=b}function p(b){var c=[],e={},d,f,h,g;if(!b.i){if(b.o===n){d=b.input;if(!b.D)a:{f=b.input;for(h=f.length-12;0<h;--h)if(f[h]===B[0]&&f[h+1]===B[1]&&f[h+2]===B[2]&&f[h+3]===B[3]){b.D=h;break a}a(Error("End of Central Directory Record not found"))}f=b.D;d[f++]===B[0]&&d[f++]===B[1]&&d[f++]===B[2]&&d[f++]===B[3]||a(Error("invalid signature"));b.ha=d[f++]|d[f++]<<8;b.ja=d[f++]|d[f++]<<8;b.ka=d[f++]|d[f++]<<8;b.aa=d[f++]|d[f++]<<8;b.Q=
(d[f++]|d[f++]<<8|d[f++]<<16|d[f++]<<24)>>>0;b.o=(d[f++]|d[f++]<<8|d[f++]<<16|d[f++]<<24)>>>0;b.w=d[f++]|d[f++]<<8;b.v=s?d.subarray(f,f+b.w):d.slice(f,f+b.w)}d=b.o;h=0;for(g=b.aa;h<g;++h)f=new k(b.input,d),f.parse(),d+=f.length,c[h]=f,e[f.filename]=h;b.Q<d-b.o&&a(Error("invalid file header size"));b.i=c;b.G=e}}function r(a,b,c){c^=a.s(b);a.k(b,c);return c}var n=void 0,q,u=this,s="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;new (s?Uint8Array:Array)(256);
for(q=0;256>q;++q)for(var t=q,x=7,t=t>>>1;t;t>>>=1)--x;q=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,
3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,
314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,
3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,
1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,
1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];var y=s?new Uint32Array(q):q;q=[];for(t=0;288>t;t++)switch(!0){case 143>=t:q.push([t+48,8]);break;case 255>=t:q.push([t-144+400,9]);break;case 279>=t:q.push([t-256+0,7]);break;case 287>=t:q.push([t-280+192,8]);break;default:a("invalid literal: "+
t)}q=function(){function b(c){switch(!0){case 3===c:return[257,c-3,0];case 4===c:return[258,c-4,0];case 5===c:return[259,c-5,0];case 6===c:return[260,c-6,0];case 7===c:return[261,c-7,0];case 8===c:return[262,c-8,0];case 9===c:return[263,c-9,0];case 10===c:return[264,c-10,0];case 12>=c:return[265,c-11,1];case 14>=c:return[266,c-13,1];case 16>=c:return[267,c-15,1];case 18>=c:return[268,c-17,1];case 22>=c:return[269,c-19,2];case 26>=c:return[270,c-23,2];case 30>=c:return[271,c-27,2];case 34>=c:return[272,
c-31,2];case 42>=c:return[273,c-35,3];case 50>=c:return[274,c-43,3];case 58>=c:return[275,c-51,3];case 66>=c:return[276,c-59,3];case 82>=c:return[277,c-67,4];case 98>=c:return[278,c-83,4];case 114>=c:return[279,c-99,4];case 130>=c:return[280,c-115,4];case 162>=c:return[281,c-131,5];case 194>=c:return[282,c-163,5];case 226>=c:return[283,c-195,5];case 257>=c:return[284,c-227,5];case 258===c:return[285,c-258,0];default:a("invalid length: "+c)}}var c=[],d,e;for(d=3;258>=d;d++)e=b(d),c[d]=e[2]<<24|e[1]<<
16|e[0];return c}();s&&new Uint32Array(q);var z=0,A=1;e.prototype.r=function(){for(;!this.u;){var b=d(this,3);b&1&&(this.u=!0);b>>>=1;switch(b){case 0:var b=this.input,c=this.c,e=this.b,f=this.a,h=n,k=n,l=n,m=e.length,h=n;this.d=this.f=0;h=b[c++];h===n&&a(Error("invalid uncompressed block header: LEN (first byte)"));k=h;h=b[c++];h===n&&a(Error("invalid uncompressed block header: LEN (second byte)"));k|=h<<8;h=b[c++];h===n&&a(Error("invalid uncompressed block header: NLEN (first byte)"));l=h;h=b[c++];
h===n&&a(Error("invalid uncompressed block header: NLEN (second byte)"));l|=h<<8;k===~l&&a(Error("invalid uncompressed block header: length verify"));c+k>b.length&&a(Error("input buffer is broken"));switch(this.n){case z:for(;f+k>e.length;){h=m-f;k-=h;if(s)e.set(b.subarray(c,c+h),f),f+=h,c+=h;else for(;h--;)e[f++]=b[c++];this.a=f;e=this.e();f=this.a}break;case A:for(;f+k>e.length;)e=this.e({H:2});break;default:a(Error("invalid inflate mode"))}if(s)e.set(b.subarray(c,c+k),f),f+=k,c+=k;else for(;k--;)e[f++]=
b[c++];this.c=c;this.a=f;this.b=e;break;case 1:this.q(J,K);break;case 2:g(this);break;default:a(Error("unknown BTYPE: "+b))}}return this.B()};q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var G=s?new Uint16Array(q):q;q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258];var C=s?new Uint16Array(q):q;q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0];var E=s?new Uint8Array(q):q;q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,
769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var D=s?new Uint16Array(q):q;q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var F=s?new Uint8Array(q):q;q=new (s?Uint8Array:Array)(288);t=0;for(x=q.length;t<x;++t)q[t]=143>=t?8:255>=t?9:279>=t?7:8;var J=c(q);q=new (s?Uint8Array:Array)(30);t=0;for(x=q.length;t<x;++t)q[t]=5;var K=c(q);q=e.prototype;q.q=function(a,b){var c=this.b,e=this.a;this.C=a;for(var h=c.length-258,g,k,l;256!==(g=f(this,a));)if(256>g)e>=h&&(this.a=
e,c=this.e(),e=this.a),c[e++]=g;else for(g-=257,l=C[g],0<E[g]&&(l+=d(this,E[g])),g=f(this,b),k=D[g],0<F[g]&&(k+=d(this,F[g])),e>=h&&(this.a=e,c=this.e(),e=this.a);l--;)c[e]=c[e++-k];for(;8<=this.d;)this.d-=8,this.c--;this.a=e};q.V=function(a,b){var c=this.b,e=this.a;this.C=a;for(var h=c.length,g,k,l;256!==(g=f(this,a));)if(256>g)e>=h&&(c=this.e(),h=c.length),c[e++]=g;else for(g-=257,l=C[g],0<E[g]&&(l+=d(this,E[g])),g=f(this,b),k=D[g],0<F[g]&&(k+=d(this,F[g])),e+l>h&&(c=this.e(),h=c.length);l--;)c[e]=
c[e++-k];for(;8<=this.d;)this.d-=8,this.c--;this.a=e};q.e=function(){var a=new (s?Uint8Array:Array)(this.a-32768),b=this.a-32768,c,e,d=this.b;if(s)a.set(d.subarray(32768,a.length));else for(c=0,e=a.length;c<e;++c)a[c]=d[c+32768];this.l.push(a);this.t+=a.length;if(s)d.set(d.subarray(b,b+32768));else for(c=0;32768>c;++c)d[c]=d[b+c];this.a=32768;return d};q.W=function(a){var b,c=this.input.length/this.c+1|0,e,d,f,h=this.input,g=this.b;a&&("number"===typeof a.H&&(c=a.H),"number"===typeof a.P&&(c+=a.P));
2>c?(e=(h.length-this.c)/this.C[2],f=e/2*258|0,d=f<g.length?g.length+f:g.length<<1):d=g.length*c;s?(b=new Uint8Array(d),b.set(g)):b=g;return this.b=b};q.B=function(){var a=0,b=this.b,c=this.l,e,d=new (s?Uint8Array:Array)(this.t+(this.a-32768)),f,h,g,k;if(0===c.length)return s?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);f=0;for(h=c.length;f<h;++f)for(e=c[f],g=0,k=e.length;g<k;++g)d[a++]=e[g];f=32768;for(h=this.a;f<h;++f)d[a++]=b[f];this.l=[];return this.buffer=d};q.R=function(){var a,
b=this.a;s?this.K?(a=new Uint8Array(b),a.set(this.b.subarray(0,b))):a=this.b.subarray(0,b):(this.b.length>b&&(this.b.length=b),a=this.b);return this.buffer=a};l.prototype.L=function(a){this.j=a};l.prototype.s=function(a){a=a[2]&65535|2;return a*(a^1)>>8&255};l.prototype.k=function(a,b){a[0]=(y[(a[0]^b)&255]^a[0]>>>8)>>>0;a[1]=(6681*(20173*(a[1]+(a[0]&255))>>>0)>>>0)+1>>>0;a[2]=(y[(a[2]^a[1]>>>24)&255]^a[2]>>>8)>>>0};l.prototype.T=function(a){var b=[305419896,591751049,878082192],c,e;s&&(b=new Uint32Array(b));
c=0;for(e=a.length;c<e;++c)this.k(b,a[c]&255);return b};var H=[80,75,1,2],I=[80,75,3,4],B=[80,75,5,6];k.prototype.parse=function(){var b=this.input,c=this.offset;b[c++]===H[0]&&b[c++]===H[1]&&b[c++]===H[2]&&b[c++]===H[3]||a(Error("invalid file header signature"));this.version=b[c++];this.ia=b[c++];this.Z=b[c++]|b[c++]<<8;this.I=b[c++]|b[c++]<<8;this.A=b[c++]|b[c++]<<8;this.time=b[c++]|b[c++]<<8;this.U=b[c++]|b[c++]<<8;this.p=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;this.z=(b[c++]|b[c++]<<8|b[c++]<<
16|b[c++]<<24)>>>0;this.J=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;this.h=b[c++]|b[c++]<<8;this.g=b[c++]|b[c++]<<8;this.F=b[c++]|b[c++]<<8;this.ea=b[c++]|b[c++]<<8;this.ga=b[c++]|b[c++]<<8;this.fa=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;this.$=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;this.filename=String.fromCharCode.apply(null,s?b.subarray(c,c+=this.h):b.slice(c,c+=this.h));this.X=s?b.subarray(c,c+=this.g):b.slice(c,c+=this.g);this.v=s?b.subarray(c,c+this.F):b.slice(c,c+this.F);this.length=
c-this.offset};m.prototype.parse=function(){var b=this.input,c=this.offset;b[c++]===I[0]&&b[c++]===I[1]&&b[c++]===I[2]&&b[c++]===I[3]||a(Error("invalid local file header signature"));this.Z=b[c++]|b[c++]<<8;this.I=b[c++]|b[c++]<<8;this.A=b[c++]|b[c++]<<8;this.time=b[c++]|b[c++]<<8;this.U=b[c++]|b[c++]<<8;this.p=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;this.z=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;this.J=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;this.h=b[c++]|b[c++]<<8;this.g=b[c++]|b[c++]<<
8;this.filename=String.fromCharCode.apply(null,s?b.subarray(c,c+=this.h):b.slice(c,c+=this.h));this.X=s?b.subarray(c,c+=this.g):b.slice(c,c+=this.g);this.length=c-this.offset};q=h.prototype;q.Y=function(){var a=[],b,c,e;this.i||p(this);e=this.i;b=0;for(c=e.length;b<c;++b)a[b]=e[b].filename;return a};q.r=function(b,c){var d;this.G||p(this);d=this.G[b];d===n&&a(Error(b+" not found"));var f;f=c||{};var h=this.input,g=this.i,k,l,q,z;g||p(this);g[d]===n&&a(Error("wrong index"));g=g[d].$;d=new m(this.input,
g);d.parse();g+=d.length;k=d.z;if(0!==(d.I&1)){f.password||this.j||a(Error("please set password"));f=this.S(f.password||this.j);q=g;for(z=g+12;q<z;++q)r(this,f,h[q]);g+=12;k-=12;q=g;for(z=g+k;q<z;++q)h[q]=r(this,f,h[q])}switch(d.A){case 0:l=s?this.input.subarray(g,g+k):this.input.slice(g,g+k);break;case 8:l=(new e(this.input,{index:g,bufferSize:d.J})).r();break;default:a(Error("unknown compression type"))}if(this.ba){h=n;k="number"===typeof h?h:h=0;f=l.length;g=-1;for(k=f&7;k--;++h)g=g>>>8^y[(g^l[h])&
255];for(k=f>>3;k--;h+=8)g=g>>>8^y[(g^l[h])&255],g=g>>>8^y[(g^l[h+1])&255],g=g>>>8^y[(g^l[h+2])&255],g=g>>>8^y[(g^l[h+3])&255],g=g>>>8^y[(g^l[h+4])&255],g=g>>>8^y[(g^l[h+5])&255],g=g>>>8^y[(g^l[h+6])&255],g=g>>>8^y[(g^l[h+7])&255];h=(g^4294967295)>>>0;d.p!==h&&a(Error("wrong crc: file=0x"+d.p.toString(16)+", data=0x"+h.toString(16)))}return l};q.L=function(a){this.j=a};q.k=l.prototype.k;q.S=l.prototype.T;q.s=l.prototype.s;b("Zlib.Unzip",h);b("Zlib.Unzip.prototype.decompress",h.prototype.r);b("Zlib.Unzip.prototype.getFilenames",
h.prototype.Y);b("Zlib.Unzip.prototype.setPassword",h.prototype.L)}).call(this);function InputStream(a){this.buffer=a;this.offset=0;this.byteLength=a.length;this.convBuf=new ArrayBuffer(8);this.convUint8=new Uint8Array(this.convBuf);this.convUint16=new Uint16Array(this.convBuf);this.convInt32=new Int32Array(this.convBuf);this.convUint32=new Uint32Array(this.convBuf);this.convFloat32=new Float32Array(this.convBuf);this.convFloat64=new Float64Array(this.convBuf)}
InputStream.prototype.seek=function(a){this.offset=a};InputStream.prototype.getBytes=function(a){var b=new Uint8Array(this.buffer.buffer,this.offset,a);this.offset+=a;return b};InputStream.prototype.getVarints=function(){var a,b=0,c=0;do a=this.buffer[this.offset++],b|=(a&127)<<c,c+=7;while(a&128);return b};InputStream.prototype.getUint8=function(){return this.buffer[this.offset++]};
InputStream.prototype.getUint16=function(){this.convUint8[0]=this.buffer[this.offset++];this.convUint8[1]=this.buffer[this.offset++];return this.convUint16[0]};InputStream.prototype.getInt16=function(){var a=this.getUint16();32767<a&&(a|=4294901760);return a};InputStream.prototype.getInt32=function(){var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convInt32[0]};
InputStream.prototype.getUint32=function(){var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convUint32[0]};InputStream.prototype.getFloat32=function(){var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convFloat32[0]};InputStream.prototype.getFloat64=function(){for(var a=this.buffer,b=this.convUint8,c=this.offset,e=0;8>e;e++)b[e]=a[c+e];this.offset+=8;return this.convFloat64[0]};
InputStream.prototype.getString=function(a){for(var b=this.buffer,c="",e=this.offset,d=this.offset+a;e<d;e++)c+=String.fromCharCode(b[e]);this.offset+=a;return decodeURIComponent(escape(c))};InputStream.prototype.reset=function(a){this.buffer=a;this.offset=0;this.byteLength=a.length};
VBUtils={deduceUVRepetition:function(a){for(var b in a.vblayout)if(0==b.indexOf("uv"))for(var c=a.vbstride,e=a.vb,d=a.vb.length/c,f=0,g=a.vblayout[b].offset;f<d;f++,g+=c){var l=e[g],h=e[g+1];if(2<l||0>l||2<h||0>h){a.vblayout[b].isPattern=!0;break}}},computeBounds3D:function(a){var b=Infinity,c=Infinity,e=Infinity,d=-Infinity,f=-Infinity,g=-Infinity,l,h,k,m,p,r=a.vbstride,n=a.vblayout.position.offset,q=a.vb,u=a.vb.length/r;l=0;for(h=n;l<u;l++,h+=r)k=q[h],m=q[h+1],p=q[h+2],b>k&&(b=k),c>m&&(c=m),e>p&&
(e=p),d<k&&(d=k),f<m&&(f=m),g<p&&(g=p);a.boundingBox={min:{x:b,y:c,z:e},max:{x:d,y:f,z:g}};b=0.5*(b+d);c=0.5*(c+f);e=0.5*(e+g);a=a.boundingSphere={};a.center={x:b,y:c,z:e};l=g=0;for(h=n;l<u;l++,h+=r)k=q[h],m=q[h+1],p=q[h+2],k-=b,m-=c,p-=e,p=k*k+m*m+p*p,p>g&&(g=p);a.radius=Math.sqrt(g)},bboxUnion:function(a,b){b.min.x<a.min.x&&(a.min.x=b.min.x);b.min.y<a.min.y&&(a.min.y=b.min.y);b.min.z<a.min.z&&(a.min.z=b.min.z);b.max.x>a.max.x&&(a.max.x=b.max.x);b.max.y>a.max.y&&(a.max.y=b.max.y);b.max.z>a.max.z&&
(a.max.z=b.max.z)}};var VBB_LINE_SEGMENT=16,VBB_ARC_CIRCULAR=32,VBB_ARC_ELLIPTICAL=48,VBB_TEX_QUAD=64,VBB_ONE_TRIANGLE=80,VBB_INSTANCED_FLAG=0,VBB_SEG_START_RIGHT=1,VBB_SEG_START_LEFT=2,VBB_SEG_END_RIGHT=3,VBB_SEG_END_LEFT=4,TAU=2*Math.PI,VBB_COLOR_OFFSET=6,VBB_DBID_OFFSET=7,VBB_FLAGS_OFFSET=8;
function VertexBufferBuilder(a){this.useInstancing=a;this.stride=9;this.vb=new ArrayBuffer(4*this.stride*(this.useInstancing?16384:65536));this.vbf=new Float32Array(this.vb);this.vbi=new Int32Array(this.vb);this.vcount=0;this.ib=this.useInstancing?null:new Uint16Array(65536);this.icount=0;this.minx=this.miny=Infinity;this.maxx=this.maxy=-Infinity;this.dbIds={};this.numTriangleGeoms=this.numCirculars=this.numEllipticals=0}
VertexBufferBuilder.prototype.expandStride=function(){var a=this.stride;if(!(12<=a)){for(var b=this.stride+3,c=new ArrayBuffer(this.vb.byteLength/a*b),e=new Uint8Array(this.vb),d=new Uint8Array(c),f=0,g=this.vcount;f<g;f++)for(var l=f*a*4,h=f*b*4,k=0;k<4*a;k++)d[h+k]=e[l+k];this.vb=c;this.vbf=new Float32Array(c);this.vbi=new Int32Array(c);this.stride=b}};
VertexBufferBuilder.prototype.addToBounds=function(a,b){a<this.minx&&(this.minx=a);a>this.maxx&&(this.maxx=a);b<this.miny&&(this.miny=b);b>this.maxy&&(this.maxy=b)};VertexBufferBuilder.prototype.setVertexFlag=function(a,b,c,e){this.vbi[a*this.stride+VBB_FLAGS_OFFSET]=e|c|b<<16};
VertexBufferBuilder.prototype.addVertexTriangleGeom=function(a,b,c,e,d,f,g,l){for(var h=this.vcount,k=this.useInstancing?1:4,m=0;m<k;m++){var p=(h+m)*this.stride,r=this.vbf;r[p]=a;r[p+1]=b;r[p+2]=c;r[p+3]=e;r[p+4]=d;r[p+5]=f;this.vbi[p+VBB_COLOR_OFFSET]=g;this.vbi[p+VBB_DBID_OFFSET]=l;this.vcount++;this.dbIds[l]=1}return h};
VertexBufferBuilder.prototype.addVertexLine=function(a,b,c,e,d,f,g){for(var l=this.vcount,h=this.useInstancing?1:4,k=0;k<h;k++){var m=(l+k)*this.stride,p=this.vbf;p[m]=a;p[m+1]=b;p[m+2]=c;p[m+3]=e;p[m+4]=d;p[m+5]=0;this.vbi[m+VBB_COLOR_OFFSET]=f;this.vbi[m+VBB_DBID_OFFSET]=g;this.dbIds[g]=1;this.vcount++}return l};
VertexBufferBuilder.prototype.addVertexArc=function(a,b,c,e,d,f,g,l,h,k){for(var m=this.vcount,p=this.useInstancing?1:4,r=0;r<p;r++){var n=(m+r)*this.stride,q=this.vbf;q[n]=a;q[n+1]=b;q[n+2]=c;q[n+3]=e;q[n+4]=l;q[n+5]=d;this.vbi[n+VBB_COLOR_OFFSET]=h;this.vbi[n+VBB_DBID_OFFSET]=k;d!=f&&(q[n+9]=f,q[n+10]=g);this.dbIds[k]=1;this.vcount++}return m};
VertexBufferBuilder.prototype.addVertex=function(a,b,c,e,d,f,g,l){if(!this.useInstancing){var h=this.vcount,k=h*this.stride,m=this.vbf;m[k]=a;m[k+1]=b;m[k+2]=c;m[k+3]=e;m[k+4]=d;m[k+5]=0;this.vbi[k+VBB_COLOR_OFFSET]=f;this.vbi[k+VBB_DBID_OFFSET]=g;this.setVertexFlag(h,l,0,0);this.vcount++;this.dbIds[g]=1;return h}};VertexBufferBuilder.prototype.addVertexPolytriangle=function(a,b,c,e,d,f,g,l){this.useInstancing||(this.addVertex(a,b,c,e,d,f,g,l),this.addToBounds(a,b))};
VertexBufferBuilder.prototype.setVertexColor=function(a,b){this.useInstancing||(this.vbi[a*this.stride+VBB_COLOR_OFFSET]=b)};VertexBufferBuilder.prototype.addTriangle=function(a,b,c){if(!this.useInstancing){var e=this.ib,d=this.icount;if(d+3>=e.length){for(var f=new Uint16Array(2*e.length),g=0;g<d;g++)f[g]=e[g];this.ib=e=f}e[d]=a;e[d+1]=b;e[d+2]=c;this.icount+=3}};
VertexBufferBuilder.prototype.finalizeQuad=function(a,b,c){this.useInstancing?this.setVertexFlag(a,c,VBB_INSTANCED_FLAG,b):(this.addTriangle(a,a+1,a+2),this.addTriangle(a,a+2,a+3),this.setVertexFlag(a,c,VBB_SEG_START_RIGHT,b),this.setVertexFlag(a+1,c,VBB_SEG_END_RIGHT,b),this.setVertexFlag(a+2,c,VBB_SEG_END_LEFT,b),this.setVertexFlag(a+3,c,VBB_SEG_START_LEFT,b))};
VertexBufferBuilder.prototype.addSegment=function(a,b,c,e,d,f,g,l){var h=c-a,k=e-b,m=0;if(h||k)m=Math.atan2(k,h);h=Math.sqrt(h*h+k*k);d=this.addVertexLine(a,b,m,h,0.5*d,f,g);this.finalizeQuad(d,VBB_LINE_SEGMENT,l);this.addToBounds(a,b);this.addToBounds(c,e)};
VertexBufferBuilder.prototype.addTriangleGeom=function(a,b,c,e,d,f,g,l,h){this.numTriangleGeoms++;g=this.addVertexTriangleGeom(a,b,c,e,d,f,g,l,h);this.finalizeQuad(g,VBB_ONE_TRIANGLE,h);this.addToBounds(a,b);this.addToBounds(c,e);this.addToBounds(d,f)};
VertexBufferBuilder.prototype.addCircularArc=function(a,b,c,e,d,f,g,l,h){this.numCirculars++;var k=Math.abs(c-e);if(1E-4<k&&1E-4<Math.abs(k-TAU)){var k=a+d*Math.cos(c),m=b+d*Math.sin(c);this.addSegment(k,m,k,m,f,g,l,h);k=a+d*Math.cos(e);m=b+d*Math.sin(e);this.addSegment(k,m,k,m,f,g,l,h)}else this.addToBounds(a-d,b-d),this.addToBounds(a+d,b+d);a=this.addVertexArc(a,b,c,e,d,d,0,0.5*f,g,l);this.finalizeQuad(a,VBB_ARC_CIRCULAR,h)};
VertexBufferBuilder.prototype.addEllipticalArc=function(a,b,c,e,d,f,g,l,h,k,m){this.expandStride();this.numEllipticals++;var p=Math.abs(c-e);if(1E-4<Math.abs(p-TAU)){var p=a+d*Math.cos(c),r=b+f*Math.sin(c);this.addSegment(p,r,p,r,l,h,k,m);p=a+d*Math.cos(e);r=b+f*Math.sin(e);this.addSegment(p,r,p,r,l,h,k,m)}else this.addToBounds(a-d,b-f),this.addToBounds(a+d,b+f);a=this.addVertexArc(a,b,c,e,d,f,g,0.5*l,h,k);this.finalizeQuad(a,VBB_ARC_ELLIPTICAL,m)};
VertexBufferBuilder.prototype.addTexturedQuad=function(a,b,c,e,d,f){var g=0.5*e;d=this.addVertexLine(a,b+g,0,c,g,4278255615,d);this.finalizeQuad(d,VBB_TEX_QUAD,f);this.addToBounds(a,b);this.addToBounds(a+c,b+e)};VertexBufferBuilder.prototype.isFull=function(a){a||(a=3);return this.useInstancing?32767<4*this.vcount+a:32767<this.vcount+a};
VertexBufferBuilder.prototype.toMesh=function(){var a={};a.vb=new Float32Array(this.vb.slice(0,this.vcount*this.stride*4));a.vbstride=this.stride;var b=this.useInstancing?1:0;a.vblayout={fields1:{offset:0,itemSize:3,bytesPerItem:4,divisor:b},fields2:{offset:3,itemSize:3,bytesPerItem:4,divisor:b},color4b:{offset:VBB_COLOR_OFFSET,itemSize:4,bytesPerItem:1,divisor:b,normalize:!0},dbId4b:{offset:VBB_DBID_OFFSET,itemSize:4,bytesPerItem:1,divisor:b,normalize:!0},flags4b:{offset:VBB_FLAGS_OFFSET,itemSize:4,
bytesPerItem:1,divisor:b,normalize:!1}};9<this.stride&&(a.vblayout.extraParams={offset:9,itemSize:3,bytesPerItem:4,divisor:b,normalize:!1});if(this.useInstancing){for(var c in a.vblayout)a.vblayout[c].divisor=1;a.numInstances=this.vcount;b=new Int32Array(4);b[0]=VBB_SEG_START_RIGHT;b[1]=VBB_SEG_END_RIGHT;b[2]=VBB_SEG_END_LEFT;b[3]=VBB_SEG_START_LEFT;a.vblayout.instFlags4b={offset:0,itemSize:4,bytesPerItem:1,normalize:!1,divisor:0};a.vblayout.instFlags4b.array=b.buffer;b=a.indices=new Uint16Array(6);
b[0]=0;b[1]=1;b[2]=2;b[3]=0;b[4]=2;b[5]=3}else a.indices=new Uint16Array(this.ib.buffer.slice(0,2*this.icount));a.dbIds=this.dbIds;b=this.maxx-this.minx;c=this.maxy-this.miny;var e=Math.max(b,c);a.boundingBox={min:{x:this.minx,y:this.miny,z:0.001*-e},max:{x:this.maxx,y:this.maxy,z:0.001*e}};e=a.boundingSphere={};e.center={x:0.5*(this.minx+this.maxx),y:0.5*(this.miny+this.maxy),z:0};e.radius=0.5*Math.sqrt(b*b+c*c);return a};
function PackFileReader(a){31==a[0]&&139==a[1]&&(a=(new Zlib.Gunzip(a)).decompress());this.tempQuat={x:0,y:0,z:0,w:0};this.tempTrans={x:0,y:0,z:0};this.tempScale={x:1,y:1,z:1};this.tempMat=new LmvMatrix4;a=this.stream=new InputStream(a);var b=a.getInt32();this.type=a.getString(b);this.version=a.getInt32();this.types=null;this.entryOffsets=[];a.seek(a.byteLength-8);var c=a.getUint32();this.typesOffset=a.getUint32();a.seek(this.typesOffset);var e=this.readU32V();this.types=[];for(b=0;b<e;++b)this.types.push({entryClass:this.readString(),
entryType:this.readString(),version:this.readU32V()});a.seek(c);c=this.readU32V();e=this.entryOffsets;for(b=0;b<c;++b)e.push(a.getUint32());a.seek(0)}PackFileReader.prototype.readVarint=function(){var a,b=0,c=0;do a=this.stream.getUint8(),b|=(a&127)<<c,c+=7;while(a&128);return b};PackFileReader.prototype.readU32V=PackFileReader.prototype.readVarint;PackFileReader.prototype.readU16=function(){return this.stream.getUint16()};PackFileReader.prototype.readU8=function(){return this.stream.getUint8()};
PackFileReader.prototype.readString=function(){return this.stream.getString(this.readU32V())};PackFileReader.prototype.readVector3f=function(){var a=this.stream;return{x:a.getFloat32(),y:a.getFloat32(),z:a.getFloat32()}};
PackFileReader.prototype.readTransform=function(a,b,c){function e(a){a.x=g.getFloat32();a.y=g.getFloat32();a.z=g.getFloat32();a.w=g.getFloat32()}function d(a){a.x=g.getFloat64();a.y=g.getFloat64();a.z=g.getFloat64()}function f(){m.identity();for(var a=0;3>a;++a)for(var b=0;3>b;++b)m.elements[4*a+b]=g.getFloat32()}var g=this.stream,l=this.tempTrans,h=this.tempQuat,k=this.tempScale,m=this.tempMat;switch(g.getUint8()){case 4:m.identity();break;case 0:d(l);m.makeTranslation(l.x,l.y,l.z);break;case 1:e(h);
d(l);k.x=1;k.y=1;k.z=1;m.compose(l,h,k);break;case 2:var p=g.getFloat32();e(h);d(l);k.x=p;k.y=p;k.z=p;m.compose(l,h,k);break;case 3:f(),d(l),m.setPosition(l)}if(void 0!==a)for(a=m.elements,l=0;16>l;l++)b[c++]=a[l];else return(new LmvMatrix4).copy(m)};PackFileReader.prototype.getEntryCounts=function(){return this.entryOffsets.length};
PackFileReader.prototype.seekToEntry=function(a){var b=this.getEntryCounts();if(a>=b)return null;this.stream.seek(this.entryOffsets[a]);a=this.stream.getUint32();return a>=this.types.length?null:this.types[a]};
PackFileReader.prototype.readPathID=function(){var a=this.stream;if(2>this.version){var b=a.getUint16();if(!b)return null;a.getUint16();if(1==b)return"";for(var c=a.getUint16(),e=2;e<b;++e)c+="/"+a.getUint16()}else{b=this.readU32V();if(!b)return null;this.readU32V();if(1==b)return"";c=this.readU32V();for(e=2;e<b;++e)c+="/"+this.readU32V()}return c};
function readOpenCTM_RAW(a,b){var c=a.getString(4);if("INDX"!=c)return null;for(var e=b.vertexCount,d=b.triangleCount,f=b.indices=new Uint16Array(3*d),c=0,d=3*d;c<d;c++)f[c]=a.getInt32();c=a.getString(4);if("VERT"!=c)return null;for(var f=b.vbstride,d=b.vb,c=0,g=b.vblayout.position.offset;c<e;c++,g+=f)d[g]=a.getFloat32(),d[g+1]=a.getFloat32(),d[g+2]=a.getFloat32();if(b.flags&1){c=a.getString(4);if("NORM"!=c)return null;c=0;for(g=b.vblayout.normal.offset;c<e;c++,g+=f)d[g]=a.getFloat32(),d[g+1]=a.getFloat32(),
d[g+2]=a.getFloat32()}for(var l=0;l<b.texMapCount;l++){c=a.getString(4);if("TEXC"!=c)return null;c={name:a.getString(a.getInt32()),file:a.getString(a.getInt32())};b.uvs.push(c);g="uv";l&&(g+=(l+1).toString());c=0;for(g=b.vblayout[g].offset;c<e;c++,g+=f)d[g]=a.getFloat32(),d[g+1]=a.getFloat32()}for(l=0;l<b.attribMapCount;l++){c=a.getString(4);if("ATTR"!=c)return null;c={name:a.getString(a.getInt32())};if(-1!=c.name.indexOf("Color"))for(c=0,g=b.vblayout.color.offset;c<e;c++,g+=f)d[g]=a.getFloat32(),
d[g+1]=a.getFloat32(),d[g+2]=a.getFloat32(),a.getFloat32();else b.attrs.push(c),a.getBytes(16*e)}}
var readOpenCTM=function(a){if("OCTM"!=a.getString(4)||5!=a.getInt32())return null;var b=a.getString(3);a.getUint8();var c={stream:null,vertices:null,indices:null,normals:null,colors:null,uvs:[],attrs:[]};c.vertexCount=a.getInt32();c.triangleCount=a.getInt32();c.texMapCount=a.getInt32();c.attribMapCount=a.getInt32();c.flags=a.getInt32();c.comment=a.getString(a.getInt32());c.vbstride=3;c.flags&1&&(c.vbstride+=3);c.vbstride+=2*(c.texMapCount||0);0<c.attribMapCount&&(c.vbstride+=3);c.vblayout={};var e=
0;c.vblayout.position={offset:e,itemSize:3};e+=3;c.flags&1&&(c.vblayout.normal={offset:e,itemSize:3},e+=3);if(c.texMapCount)for(var d=0;d<c.texMapCount;d++){var f="uv";d&&(f+=(d+1).toString());c.vblayout[f]={offset:e,itemSize:2};e+=2}c.attribMapCount&&(c.vblayout.color={offset:e,itemSize:3});c.vb=new Float32Array(c.vertexCount*c.vbstride);return"RAW"==b?(readOpenCTM_RAW(a,c),VBUtils.deduceUVRepetition(c),VBUtils.computeBounds3D(c),c):"MG2"==b?(readOpenCTM_MG2(a,c),VBUtils.deduceUVRepetition(c),VBUtils.computeBounds3D(c),
c):null},readLines=function(a,b){var c={isLines:!0,vertices:null,indices:null,colors:null,normals:null,uvs:[],attrs:[]},e,d;1<b.version?(c.vertexCount=a.readU16(),e=a.readU16(),d=a.readU16()):(c.vertexCount=a.readU32V(),e=a.readU32V(),d=a.readU32V());var f=0!=a.stream.getUint8();c.vbstride=3;f&&(c.vbstride+=3);c.vblayout={};var g=0;c.vblayout.position={offset:g,itemSize:3};f&&(c.vblayout.color={offset:g+3,itemSize:3});c.vb=new Float32Array(c.vertexCount*c.vbstride);for(var l=c.vb,h=c.vbstride,k=a.stream,
m=0,g=c.vblayout.position.offset,p=c.vertexCount;m<p;m++,g+=h)l[g]=k.getFloat32(),l[g+1]=k.getFloat32(),l[g+2]=k.getFloat32();if(f)for(m=0,g=c.vblayout.color.offset,f=c.vertexCount;m<f;m++,g+=h)l[g]=k.getFloat32(),l[g+1]=k.getFloat32(),l[g+2]=k.getFloat32(),k.getFloat32();m=function(a){return a.buffer.slice(a.byteOffset,a.byteOffset+a.length)};1<b.version?(e=new Uint16Array(m(k.getBytes(2*e))),k=new Uint16Array(m(k.getBytes(2*d)))):(e=new Int32Array(m(k.getBytes(4*e))),k=new Int32Array(m(k.getBytes(4*
d))));c.indices=new Uint16Array(2*(k[d-1]-d+1));for(m=g=0;m+1<d;m++)for(l=k[m];l+1<k[m+1];l++)c.indices[g++]=e[l],c.indices[g++]=e[l+1];VBUtils.computeBounds3D(c);return c};function readGeometry(a,b,c){return(b=a.seekToEntry(b))?"Autodesk.CloudPlatform.OpenCTM"==b.entryType?readOpenCTM(a.stream):"Autodesk.CloudPlatform.Lines"==b.entryType?readLines(a,b):null:null}
function convertMaterials(a){var b=function(a,b){if(!a||!a.colors)return{r:1,g:0,b:0};var c=a.colors[b];if(!c)return{r:0,g:0,b:0};c=c.values;if(!c||!c.length)return{r:1,g:0,b:0};c=c[0];return{r:c.r,g:c.g,b:c.b}},c=function(a,b){if(!a||!a.scalars)return 0;var c=a.scalars[b];return c?c.values[0]:void 0},e=function(a,b){if(!a||!a.booleans)return 0;var c=a.booleans;return c?c[b]:void 0},d=a.materials.materials;a.simplemats={};for(var f in d){var g=d[f],l=g.materials,h=l[g.userassets[0]];if(h&&"SimplePhong"==
h.definition){var g=h.properties,k={};k.tag=h.tag;k.proteinType=h.proteinType;void 0===k.proteinType&&(k.proteinType=null);k.ambient=b(g,"generic_ambient");k.color=b(g,"generic_diffuse");k.specular=b(g,"generic_specular");k.emissive=b(g,"generic_emissive");var m=c(g,"generic_glossiness");m||(m=30);k.shininess=m;(m=c(g,"generic_transparency"))||(m=0);k.opacity=1-m;(m=c(g,"generic_reflectivity_at_0deg"))||(m=0);k.reflectivity=m;m=e(g,"generic_is_metal");void 0!==m&&(k.metal=m);m=e(g,"generic_backface_cull");
void 0!==m&&(k.doubleSided=!m);k.transparent=h.transparent;var h=h.textures,p;for(p in h){var m=l[h[p].connections[0]].properties,r=m.uris.unifiedbitmap_Bitmap.values[0],n=null;if(r)if("generic_diffuse"==p){if(n="map",!k.color||0==k.color.r&&0==k.color.g&&0==k.color.b)k.color={r:1,g:1,b:1}}else"generic_bump"==p?(n=e(g,"generic_bump_is_normal")?"normalMap":"bumpMap",k.bumpScale=c(g,"generic_bump_amount")):"generic_specular"==p?n="specularMap":"generic_reflection"!=p&&"generic_alpha"==p&&(n="alphaMap");
n&&(k["uri_"+n]=r,(r=c(m,"texture_UScale"))&&(k["uscale_"+n]=r),(r=c(m,"texture_VScale"))&&(k["vscale_"+n]=r))}a.simplemats[f]=k}}}function readLightDefinition(a,b){var c=a.seekToEntry(b);if(!c||1<c.version)return null;c=a.stream;return{position:a.readVector3f(),dir:a.readVector3f(),r:c.getFloat32(),g:c.getFloat32(),b:c.getFloat32(),intensity:c.getFloat32(),spotAngle:c.getFloat32(),size:c.getFloat32(),type:c.getUint8()}}
function readCameraDefinition(a,b){var c=a.seekToEntry(b.definition);if(!c||2<c.version)return null;var e=a.stream,d={isPerspective:!e.getUint8(),position:a.readVector3f(),target:a.readVector3f(),up:a.readVector3f(),aspect:e.getFloat32(),fov:e.getFloat32()*(180/Math.PI)};2>c.version&&(e.getFloat32(),e.getFloat32());d.orthoScale=e.getFloat32();return d}
function FragList(){this.numLoaded=this.length=0;this.mesh2frag=this.fragId2dbId=this.entityIndexes=this.packIds=this.materials=this.transforms=this.boxes=null}
function readGeometryMetadata(a,b){var c=a.getEntryCounts(),e=a.stream;b.length=c;for(var d=b.fragTypes=new Uint8Array(c),f=b.primCounts=new Uint16Array(c),g=b.packIds=new Int32Array(c),l=b.entityIndexes=new Int32Array(c),h=0;h<c&&a.seekToEntry(h);h++)d[h]=e.getUint8(),e.seek(e.offset+24),f[h]=e.getUint16(),g[h]=parseInt(a.readString()),l[h]=a.readU32V()}
function readFragments(a,b){function c(a){a*=6;for(var b=0;6>b;b++)g[a++]=f.getFloat32()}function e(a,b,c){a*=6;for(var e=0;6>e;e++)g[a++]=f.getFloat32()+b[c+e%3]}var d=a.getEntryCounts(),f=a.stream;b.length=d;b.numLoaded=0;for(var g=b.boxes=new Float32Array(6*d),l=b.transforms=new Float32Array(16*d),h=b.materials=new Int32Array(d),k=b.packIds=new Int32Array(d),m=b.entityIndexes=new Int32Array(d),p=b.geomDataIndexes=new Int32Array(d),d=b.fragId2dbId=new Int32Array(d),r=0,n=b.length;r<n;r++){var q=
a.seekToEntry(r);if(!q)break;if(5<q.version)break;4<q.version&&a.readU8();h[r]=a.readU32V();2<q.version?p[r]=a.readU32V():(k[r]=parseInt(a.readString()),m[r]=a.readU32V());a.readTransform(r,l,16*r);3<q.version?e(r,l,16*r+12):c(r);1<q.version&&(d[r]=a.readU32V())}}
function filterFragments(a,b){a.length=b.length;a.numLoaded=0;for(var c=a.length,e=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],d=new Float32Array(6*c),f=new Float32Array(16*c),g=new Int32Array(c),l=new Int32Array(c),c=new Int32Array(c),h={},k=0;k<b.length;++k){for(var m=b[k],p=6*m,r=6*k,n=0;6>n;++n)d[r++]=a.boxes[p++];p=16*m;r=16*k;for(n=0;16>n;++n)f[r++]=a.transforms[p++];g[k]=a.materials[m];l[k]=a.packIds[m];c[k]=a.entityIndexes[m];n=a.packIds[m]+":"+a.entityIndexes[m];m=h[n];void 0==
m?h[n]=k:Array.isArray(m)?m.push(k):h[n]=[m,k];m=6*k;for(n=0;3>n;++n)d[m+n]<e[n]&&(e[n]=d[m+n]);for(n=3;6>n;++n)d[m+n]>e[n]&&(e[n]=d[m+n])}a.boxes=d;a.transforms=f;a.materials=g;a.packIds=l;a.entityIndexes=c;a.mesh2frag=h;return e}function readInstance(a,b){var c=a.seekToEntry(b);if(!c||2<c.version)return null;1<c.version&&a.readU8();return{definition:a.stream.getUint32(),transform:a.readTransform(),instanceNodePath:a.readPathID()}}
function Package(){this.fragments=this.metadata=this.simplemats=this.materials=this.manifest=null;this.geompacks=[];this.instances=[];this.cameras=[];this.lights=[];this.propertydb={attrs:[],avs:[],ids:[],values:[],offsets:[]};this.animations=this.bbox=null;this.pendingRequests=0}
Package.prototype.loadAsyncResource=function(a,b,c,e){function d(b){f.pendingRequests--;this.response&&(b=new Uint8Array(this.response),31==b[0]&&139==b[1]&&(b=(new Zlib.Gunzip(b)).decompress()),e(b));0==f.pendingRequests&&f.postLoad(a)}if(c)e(c);else{var f=this;this.pendingRequests++;(new Xhr(a.errorHandler,a.auth,a.viewing_url)).get(a.basePath+b,a.headers,"arraybuffer",d,"",a.queryParams)}};
Package.prototype.load=function(a,b){var c=this,e=new Zlib.Unzip(b),d=e.decompress("manifest.json");if(!d)return!1;var f=new InputStream(d),g=JSON.parse(f.getString(d.byteLength)),d=e.decompress("metadata.json"),f=new InputStream(d);3<d.byteLength&&0!==d[3]&&(this.metadata=JSON.parse(f.getString(d.byteLength)).metadata)&&(f=this.metadata["world bounding box"],this.bbox={min:{x:f.minXYZ[0],y:f.minXYZ[1],z:f.minXYZ[2]},max:{x:f.maxXYZ[0],y:f.maxXYZ[1],z:f.maxXYZ[2]}},this.metadata.hasOwnProperty("double sided geometry")&&
this.metadata["double sided geometry"].value&&(this.doubleSided=!0));this.manifest=g;this.primitiveCount=this.packFileTotalSize=0;for(var l=g.typesets,f={},d=0;d<l.length;d++){var h=l[d];f[h.id]=h.types}g=g.assets;for(d=0;d<g.length;d++){h=g[d];l=h.type;0==l.indexOf("Autodesk.CloudPlatform.")&&(l=l.substr(23));var k=h.URI,m=h.typeset?f[h.typeset]:null;0!=k.indexOf("embed:/")&&("PackFile"==l?"Autodesk.CloudPlatform.Geometry"==(m?m[0]["class"]:null)&&(this.packFileTotalSize+=h.usize||0,this.geompacks.push({id:h.id,
uri:k})):"PropertyAttributes"==l?this.propertydb.attrs.push(k):"PropertyAVs"==l?this.propertydb.avs.push(k):"PropertyIDs"==l?this.propertydb.ids.push(k):"PropertyOffsets"==l?this.propertydb.offsets.push(k):"PropertyValues"==l&&this.propertydb.values.push(k));var h=h.URI,p;0==h.indexOf("embed:/")&&(h=h.substr(7),p=e.decompress(h));"ProteinMaterials"==l?-1==h.indexOf("Protein")?this.loadAsyncResource(a,h,p,function(a){var b=new InputStream(a);a=a.byteLength;0<a?(c.materials=JSON.parse(b.getString(a)),
convertMaterials(c)):c.materials=null}):this.loadAsyncResource(a,h,p,function(a){var b=new InputStream(a);a=a.byteLength;c.proteinMaterials=0<a?JSON.parse(b.getString(a)):null}):"FragmentList"==l?this.loadAsyncResource(a,h,p,function(a){a=new PackFileReader(a);var b=c.fragments=new FragList;readFragments(a,b)}):"GeometryMetadataList"==l?this.loadAsyncResource(a,h,p,function(a){a=new PackFileReader(a);c.geomMetadata={};readGeometryMetadata(a,c.geomMetadata)}):"PackFile"==l?-1!=h.indexOf("CameraDefinitions.bin")?
this.loadAsyncResource(a,h,p,function(a){c.camDefPack=new PackFileReader(a)}):-1!=h.indexOf("CameraList.bin")?this.loadAsyncResource(a,h,p,function(a){c.camInstPack=new PackFileReader(a)}):-1!=h.indexOf("LightDefinitions.bin")?this.loadAsyncResource(a,h,p,function(a){c.lightDefPack=new PackFileReader(a)}):-1!=h.indexOf("LightList.bin")&&this.loadAsyncResource(a,h,p,function(a){c.lightInstPack=new PackFileReader(a)}):"Animations"==l&&this.loadAsyncResource(a,h,p,function(a){var b=new InputStream(a);
a=a.byteLength;c.animations=0<a?JSON.parse(b.getString(a)):null})}0==this.pendingRequests&&this.postLoad(a)};
Package.prototype.postLoad=function(a){if(this.camDefPack&&this.camInstPack){for(var b=0,c=this.camInstPack.getEntryCounts();b<c;b++){var e=readInstance(this.camInstPack,b),d=readCameraDefinition(this.camDefPack,e);e.transform&&(e.transform.transformPoint(d.position),e.transform.transformPoint(d.target),e.transform.transformDirection(d.up));this.cameras.push(d)}delete this.camDefPack;delete this.camInstPack}if(this.lightDefPack&&this.lightInstPack){b=0;for(c=this.lightInstPack.getEntryCounts();b<
c;b++)e=readInstance(this.lightInstPack,b),this.lights.push(readLightDefinition(this.lightDefPack,e.definition));delete this.lightInstPack;delete this.lightDefPack}e=this.fragments;if(this.geomMetadata){c=this.geomMetadata;b=0;for(d=e.length;b<d;b++){var f=e.geomDataIndexes[b];e.entityIndexes[b]=c.entityIndexes[f];e.packIds[b]=c.packIds[f];this.primitiveCount+=c.primCounts[f]}delete this.geomMetadata}for(var f=e.mesh2frag={},c=e.packIds,g=e.entityIndexes,b=0,d=e.length;b<d;b++){var l=c[b]+":"+g[b],
h=f[l];void 0===h?f[l]=b:Array.isArray(h)?h.push(b):f[l]=[h,b]}if(!this.bbox){c=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];d=e.boxes;f=0;for(e=e.length;f<e;f++){g=6*f;for(b=0;3>b;b++)d[g+b]<c[b]&&(c[b]=d[g+b]);for(b=3;6>b;b++)d[g+b]>c[b]&&(c[b]=d[g+b])}this.bbox={min:{x:c[0],y:c[1],z:c[2]},max:{x:c[3],y:c[4],z:c[5]}}}f=a.objectIds;if(null!=f){c=[];e=[];for(b=0;b<f.length;++b)for(d=0;d<this.fragments.length;++d)this.fragments.fragId2dbId[d]==f[b]&&(c.push(this.fragments.packIds[d]),
e.push(d));d=1;f=c.length;for(b=1;b<f;){for(;b<f&&c[b]==c[b-1];)++b;if(f==b)break;c[d++]=c[b++]}c.splice(d-1,f-d);f=[];for(b=0;b<this.geompacks.length;++b)for(d=0;d<c.length;++d)parseInt(this.geompacks[b].id)==c[d]&&f.push(this.geompacks[b]);this.geompacks=f;b=filterFragments(this.fragments,e);this.bbox={min:{x:b[0],y:b[1],z:b[2]},max:{x:b[3],y:b[4],z:b[5]}}}a.loadDoneCB(!0)};
function PropertyDatabase(a){function b(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);a=decodeURIComponent(escape(b));return JSON.parse(a)}function c(a,b){for(var c=b,e="";c<a.length-1;){var d=a[c];if(44==d&&(10==a[c+1]||13==a[c+1]))break;if(10==d||13==d)break;e+=String.fromCharCode(d);c++}c=decodeURIComponent(escape(e));return JSON.parse(c)}function e(a,b){for(var c=0,e=0,d=a.length;e<d;e++)44==a[e]&&c++;c++;for(var d=new Uint32Array(c+(b?1:0)),e=0,f=a.length;91!=a[e]&&e<f;)e++;
if(e==a.length)return null;e++;for(var g=!1,h=c=0;e<f;){var k=a[e];48<=k&&57>=k?(h=10*h+(k-48),g=!0):44==k||93==k?g&&(d[c++]=h,g=!1,h=0):(g=!1,h=0);e++}return d}function d(a){for(var b=0,c=a.length-1,e=0;e<c;e++)44!=a[e]||10!=a[e+1]&&13!=a[e+1]||b++;if(!b)return null;b++;for(var d=new Uint32Array(b),b=e=0;91!=a[e]&&e<c;)e++;e++;d[b++]=e;for(var f=!1;e<c;)10==a[e]||13==a[e]?f=!0:f&&(f=!1,d[b++]=e),e++;return d}var f,g,l,h,k,m,p,r,n,q,u,s,t,x;for(x in a.attrs){f=b(a.attrs[x]);for(var y=0;y<f.length;y++)switch(f[y][1]){case "__parent__":n=
y;break;case "__child__":r=y;break;case "__name__":q=y;break;case "__instanceof__":u=y;break;case "__viewable_in__":s=y;break;case "__externalref__":t=y}break}for(x in a.avs){l=e(a.avs[x],0);delete a.avs;break}for(x in a.offsets){g=e(a.offsets[x],1);g[g.length-1]=l.length/2;delete a.offsets;break}for(x in a.values){h=a.values[x];k=d(h);break}for(x in a.ids){m=a.ids[x];p=d(m);break}this.getObjectCount=function(){return g.length-1};this.getValueAt=function(a){return c(h,k[a])};this.getIntValueAt=function(a){var b=
0;a=k[a];for(34==h[a]&&a++;a<h.length-1;){var c=h[a];if(44==c&&(10==h[a+1]||13==h[a+1]))break;if(10==c||13==c||34==c)break;48<=c&&57>=c&&(b+=10*b+(c-48));a++}return b};this.getIdAt=function(a){return c(m,p[a])};this.getObjectProperties=function(a){var b={dbId:a,name:"",properties:[]},c=null,e=2*g[a+1];for(a=2*g[a];a<e;a+=2){var d=l[a];if(d==q)d=this.getValueAt(l[a+1]),b.name=d;else if(d==u)(d=this.getObjectProperties(this.getValueAt(l[a+1])))&&d.properties&&(c=d);else if(d!=n&&d!=r&&d!=s&&d!=t){var d=
f[d],h=d[6]?d[6]:0;b.properties.push({displayName:d[5]?d[5]:d[0],displayValue:this.getValueAt(l[a+1]),displayCategory:d[1],type:d[2],units:d[3],hidden:h&1})}}if(c){e={};d=b.properties;for(a=0;a<d.length;a++)e[d[a].displayName]=1;b.name||(b.name=c.name);c=c.properties;for(a=0;a<c.length;a++)e.hasOwnProperty(c[a].displayName)||d.push(c[a])}return b};this.findRootNodes=function(){for(var a=[],b=1,c=g.length;b<c;b++){for(var e=!1,d=!1,f=!1,h=2*g[b+1],k=2*g[b];k<h;k+=2){var m=l[k];m==n?this.getIntValueAt(l[k+
1])&&(d=!0):m==r?e=!0:m==q&&(f=!0)}e&&f&&!d&&a.push(b)}return a};this.getNodeNameAndChildren=function(a,b){for(var c=a.dbId,e=2*g[c+1],d,c=2*g[c];c<e;c+=2){var f=l[c];f!=n&&(f!=r||b?f==q?(f=this.getValueAt(l[c+1]),a.name=f):f==u&&(f={dbId:this.getValueAt(l[c+1]),name:null},this.getNodeNameAndChildren(f,!0),f&&f.name&&!a.name&&(a.name=f.name)):(f=this.getValueAt(l[c+1]),f={dbId:f,parent:a},d?d.push(f):d=[f]))}return d};this.buildObjectTree=function(a,b,c,e){c>e[0]&&(e[0]=c);var d=this.getNodeNameAndChildren(a);
if(d){for(var f=0;f<d.length;f++)this.buildObjectTree(d[f],b,c+1,e);for(f=0;f<d.length;f++)if(d[f].children||void 0!==d[f].fragIds)a.children?a.children.push(d[f]):a.children=[d[f]]}b=b[a.dbId];void 0!==b&&(a.fragIds=b)};this.bruteForceSearch=function(a){a=a.toLowerCase();for(var b=[],c=[],d=0,e=k.length;d<e;d++){var f=this.getValueAt(d);"string"==typeof f?-1!=f.toLowerCase().indexOf(a)&&c.push(d):-1!=f.toString().toLowerCase().indexOf(a)&&c.push(d)}a=1;for(e=g.length;a<e;a++)for(f=2*g[a+1],d=2*g[a];d<
f;d+=2)if(-1!=c.indexOf(l[d+1])){b.push(a);break}return b}}
function F2D(a,b,c,e){function d(a){a=a.children;if(void 0!==a){for(var b=0;b<a.length;++b)d(a[b]);a.sort(function(a,b){var c=a.isLayer,d=b.isLayer;return c&&!d?-1:!c&&d?1:a.name.localeCompare(b.name,void 0,{sensitivity:"base",numeric:!0})})}}function f(a){var b=0;if(a.isLayer)b=1;else{for(var c=a.children,d=0;d<c.length;++d)b+=f(c[d]);a.childCount=b}return b}this.metadata=a;this.scaleY=this.scaleX=1;this.bbox={min:{x:0,y:0,z:0},max:{x:0,y:0,z:0}};this.is2d=!0;this.layersMap={};this.layersRoot={name:"root",
id:"root",children:[],isLayer:!1,childCount:0};this.fontDefs={};this.fontId=this.fontCount=0;this.manifestAvailable=!1;this.objectMemberQueue=[];this.propertydb={attrs:[],avs:[],ids:[],values:[],offsets:[],rcv_offsets:[],rcvs:[],viewables:[]};if(a){var g=a.page_dimensions;this.paperWidth=g.page_width;this.paperHeight=g.page_height;this.scaleX=this.paperWidth/g.plot_width;this.scaleY=this.paperHeight/g.plot_height;this.hidePaper=g.hide_paper;this.bbox.max.x=this.paperWidth;this.bbox.max.y=this.paperHeight;
var l=this.layersRoot,h=0,k=0,g=function(a,b,c){var d=l,e=a.length;if(1<e)for(var f=0;f<e-1;++f){var g=a[f],m;a:{m=d.children;for(var n=0;n<m.length;++n){var p=m[n];if(p.name===g){m=p;break a}}m=null}m||(m={name:g,id:"group-"+h++,children:[],isLayer:!1,childCount:0},d.children.push(m));d=m}d.children.push({name:b,index:c,id:k++,isLayer:!0})},m=0;this.layersMap[0]=m++;for(var p in a.layers){var r=parseInt(p),n=a.layers[p];(n="string"===typeof n?n:n.name)||(n=p);g(n.split("|"),n,r);this.layersMap[r]=
m++}this.layerCount=m}this.hidePaper=this.hidePaper||e&&e.modelSpace;d(this.layersRoot);f(this.layersRoot);this.opCount=0;this.fontFaces=[];this.fontFamilies=[];this.clip=null;this.maxObjectNumber=this.imageNumber=this.objectNumber=0;this.objectStack=[];this.objectNameStack=[];this.parseObjState={polyTriangle:{},clip:{},raster:{},text:{},fontDef:{},uknown:{}};this.layer=0;this.bgColor=e.bgColor?e.bgColor:4294967295;this.contrastColor=this.color=this.fillColor=4278190080;this.currentVbb=new VertexBufferBuilder(!1);
this.meshes=[];this.numPolytriangles=this.numTriangles=this.numCircles=this.numEllipses=this.numPolylines=this.numLineSegs=0;this.error=!1;this.offsetY=this.offsetX=0;if(b){this.manifestAvailable=!0;this.imageId2URI={};a=b.assets;b=0;for(e=a.length;b<e;++b)p=a[b],-1!=p.mime.indexOf("image/")&&(g=p.id,g=g.substr(0,g.indexOf(".")),this.imageId2URI[g]=c+p.URI),"Autodesk.CloudPlatform.PropertyAttributes"==p.type&&this.propertydb.attrs.push(p.URI),"Autodesk.CloudPlatform.PropertyValues"==p.type&&this.propertydb.values.push(p.URI),
"Autodesk.CloudPlatform.PropertyIDs"==p.type&&this.propertydb.ids.push(p.URI),"Autodesk.CloudPlatform.PropertyViewables"==p.type&&this.propertydb.viewables.push(p.URI),"Autodesk.CloudPlatform.PropertyOffsets"==p.type&&(-1!=p.id.indexOf("rcv")?this.propertydb.rcv_offsets.push(p.URI):this.propertydb.offsets.push(p.URI)),"Autodesk.CloudPlatform.PropertyAVs"==p.type&&this.propertydb.avs.push(p.URI),"Autodesk.CloudPlatform.PropertyRCVs"==p.type&&this.propertydb.rcvs.push(p.URI);debug(JSON.stringify(this.propertydb))}}
F2D.prototype.load=function(a,b){31==b[0]&&139==b[1]&&(b=(new Zlib.Gunzip(b)).decompress());this.data=b;this.parse();a.loadDoneCB(!0)};F2D.prototype.loadFrames=function(a){a.data?this.data=new Uint8Array(a.data):a.finalFrame&&(this.data=null);this.parseFrames(a.finalFrame);a.loadDoneCB(!0)};
var F2dDataType={dt_object:0,dt_void:1,dt_byte:2,dt_int:3,dt_float:4,dt_double:5,dt_varint:6,dt_point_varint:7,dt_byte_array:32,dt_int_array:33,dt_float_array:34,dt_double_drray:35,dt_varint_array:36,dt_point_varint_array:37,dt_arc:38,dt_circle:39,dt_circular_arc:40,dt_string:63,dt_last_data_type:127},F2dSemanticType={st_object_member:0,st_fill:1,st_fill_off:2,st_clip_off:3,st_layer:4,st_link:5,st_line_weight:6,st_miter_angle:7,st_miter_length:8,st_line_pattern_ref:9,st_back_color:10,st_color:11,
st_markup:12,st_object_id:13,st_markup_id:14,st_reset_rel_offset:15,st_font_ref:16,st_begin_object:32,st_clip:33,st_line_caps:34,st_line_join:35,st_line_pattern_def:36,st_font_def:37,st_sheet:42,st_arc:43,st_polyline:44,st_raster:45,st_text:46,st_polytriangle:47,st_dot:48,st_end_object:63,st_last_semantic_type:127};
F2D.prototype.flushBuffer=function(a,b){if(this.currentVbb.vcount){var c;if(c=b||this.currentVbb.isFull(a))c=this.currentVbb.toMesh(),VBUtils.bboxUnion(this.bbox,c.boundingBox),this.meshes.push(c),c.material={skipEllipticals:!this.currentVbb.numEllipses,skipCircles:!this.currentVbb.numCirculars,skipTriangleGeoms:!this.currentVbb.numTriangleGeoms},this.currentImage&&(c.material.image=this.currentImage,c.material.image.name=this.imageNumber++,this.currentImage=null),this.currentVbb=new VertexBufferBuilder}};
F2D.prototype.tx=function(a){return this.sx(a)};F2D.prototype.ty=function(a){return this.sy(a)};F2D.prototype.sx=function(a){return a*this.scaleX};F2D.prototype.sy=function(a){return a*this.scaleY};F2D.prototype.invertColor=function(a){var b,c,e;b=255-(a>>16&255);c=255-(a>>8&255);e=255-(a&255);return(a>>24&255)<<24|b<<16|c<<8|e};F2D.prototype.mapColor=function(a){return a};F2D.prototype.restoreSignBitFromLSB=function(a){return a&1?-(a>>>1):a>>>1};
F2D.prototype.parsePointPositions=function(){var a=this.stream.getVarints(),b=this.stream.getVarints(),a=this.restoreSignBitFromLSB(a),b=this.restoreSignBitFromLSB(b),a=a+this.offsetX,b=b+this.offsetY;this.offsetX=a;this.offsetY=b;return[this.tx(a),this.ty(b)]};F2D.prototype.parserAssert=function(a,b,c){return a!=b?(debug("Expect "+b+"; actual type is "+a+"; in function "+c),this.error=!0):!1};F2D.prototype.unhandledTypeWarning=function(a,b){debug("Unhandled semantic type : "+b+" in function "+a)};
F2D.prototype.parseObject=function(){var a=this.stream.getVarints();this.objectStack.push(a);switch(a){case F2dSemanticType.st_sheet:this.objectNameStack.push("sheet");this.objectMemberQueue.unshift("paperColor");break;case F2dSemanticType.st_clip:this.objectNameStack.push("clip");this.objectMemberQueue.unshift("contourCounts","points");break;case F2dSemanticType.st_polytriangle:this.objectNameStack.push("polyTriangle");this.objectMemberQueue.unshift("points","indices","colors");break;case F2dSemanticType.st_raster:this.objectNameStack.push("raster");
this.objectMemberQueue.unshift("position","width","height","imageId");break;case F2dSemanticType.st_text:this.objectNameStack.push("text");this.objectMemberQueue.unshift("string","position","height","widthScale","rotation","oblique","charWidths");break;case F2dSemanticType.st_font_def:this.objectNameStack.push("fontDef");this.objectMemberQueue.unshift("name","fullName","flags","spacing","panose");break;case F2dSemanticType.st_end_object:this.objectStack.pop();if(this.objectStack.length){switch(this.objectStack.pop()){case F2dSemanticType.st_polytriangle:this.actOnPolyTriangle();
break;case F2dSemanticType.st_clip:this.actOnClip();break;case F2dSemanticType.st_raster:this.actOnRaster();break;case F2dSemanticType.st_text:this.actOnText();break;case F2dSemanticType.st_font_def:this.actOnFontDef()}var a=this.objectNameStack.pop(),a=this.parseObjState[a],b;for(b in a)a[b]=null}else this.parserAssert(0,1,"parseEndObject (Stack Empty)");this.objectMemberQueue.length=0;break;default:this.objectNameStack.push("unknown"),this.error=!0,this.unhandledTypeWarning("parseObject",a)}};
F2D.prototype.initSheet=function(a){this.bgColor=a;if(!this.hidePaper&&this.metadata){var b=this.paperWidth,c=this.paperHeight,e=this.currentVbb,d=0.0075*b;this.addPolyTriangle([0,0,b,0,b,c,0,c,d,-d,b+d,-d,b+d,0,d,0,b,0,b+d,0,b+d,c-d,b,c-d],[a,a,a,a,4283782485,4283782485,4283782485,4283782485,4283782485,4283782485,4283782485,4283782485],[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11],4294967295,0,4294967295,!1);e.addSegment(0,0,b,0,1E-6,4278190080,4294967295,0);e.addSegment(b,0,b,c,1E-6,4278190080,4294967295,
0);e.addSegment(b,c,0,c,1E-6,4278190080,4294967295,0);e.addSegment(0,c,0,0,1E-6,4278190080,4294967295,0)}};F2D.prototype.setObjectMember=function(a){if(!this.objectMemberQueue.length)return debug("Unexpected object member. "+a),!1;var b=this.objectMemberQueue.shift(),c=this.objectNameStack[this.objectNameStack.length-1];return"sheet"==c&&"paperColor"==b?(this.initSheet(a),!0):c?(this.parseObjState[c][b]=a,!0):!1};
F2D.prototype.parseString=function(){var a=this.stream,b=a.getVarints(),c=a.getVarints(),a=a.getString(c);switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(a))return;break;default:debug("Unexpected opcode semantic type for string.")}return a};F2D.prototype.actOnFontDef=function(){var a=this.parseObjState.fontDef;this.fontDefs[++this.fontCount]=a;this.fontId=this.fontCount};
F2D.prototype.parsePoint=function(){var a=this.stream.getVarints(),b=this.parsePointPositions();switch(a){case F2dSemanticType.st_object_member:if(this.setObjectMember(b))return;break;default:debug("Unexpected opcode semantic type for point.")}return b};
F2D.prototype.parsePointsArray=function(){var a=this.stream,b=a.getVarints();if(a=a.getVarints()){for(var a=a/2,c=[],e,d=0;d<a;++d)e=this.parsePointPositions(),c.push(e[0]),c.push(e[1]);switch(b){case F2dSemanticType.st_polyline:this.actOnPolylinePointsArray(c);return;case F2dSemanticType.st_dot:this.actOnDot(c);return;case F2dSemanticType.st_object_member:if(this.setObjectMember(c))return;break;default:debug("Unexpected opcode semantic type for points array.")}return c}};
F2D.prototype.parseIntArray=function(){for(var a=this.stream,b=a.getVarints(),c=a.getVarints(),e=[],d=0;d<c;++d)e.push(a.getUint32());switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(e))return;break;default:this.unhandledTypeWarning("parseIntArray",b)}return e};
F2D.prototype.parseByteArray=function(){for(var a=this.stream,b=a.getVarints(),c=a.getVarints(),e=[],d=0;d<c;++d)e.push(a.getUint8());switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(e))return;break;default:this.unhandledTypeWarning("parseByteArray",b)}return e};
F2D.prototype.parseVarintArray=function(){for(var a=this.stream,b=a.getVarints(),c=[],e=a.getVarints(),d=0;d<e;++d)c.push(a.getVarints());switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(c))return;break;default:this.unhandledTypeWarning("parseVarIntArray",b)}return c};
F2D.prototype.parseInt=function(){var a=this.stream,b=a.getVarints(),a=a.getUint32();switch(b){case F2dSemanticType.st_color:this.color=a;break;case F2dSemanticType.st_fill:this.fill=!0;this.fillColor=a;break;case F2dSemanticType.st_object_member:if(this.setObjectMember(a))return;default:this.unhandledTypeWarning("parseInt",b)}return a};
F2D.prototype.parseVoid=function(){var a=this.stream.getVarints();switch(a){case F2dSemanticType.st_fill_off:this.fill=!1;break;default:this.unhandledTypeWarning("parseVoid",a)}};
F2D.prototype.parseVarint=function(){var a=this.stream,b=a.getVarints(),a=a.getVarints();switch(b){case F2dSemanticType.st_line_weight:this.lineWeight=this.tx(a);break;case F2dSemanticType.st_object_id:case F2dSemanticType.st_markup_id:this.objectNumber=a;this.maxObjectNumber=Math.max(this.maxObjectNumber,a);break;case F2dSemanticType.st_layer:this.layer=this.layersMap[a];break;case F2dSemanticType.st_font_ref:this.fontId=a;break;case F2dSemanticType.st_object_member:if(this.setObjectMember(a))return}return a};
F2D.prototype.parseFloat=function(){var a=this.stream,b=a.getVarints(),a=a.getFloat32();switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(a))return}return a};F2D.prototype.parseCircularArc=function(){var a=this.stream,b=a.getVarints();if(!this.parserAssert(b,F2dSemanticType.st_arc,"parseCircularArc")){var b=this.parsePointPositions(),c=a.getVarints(),e=a.getFloat32(),a=a.getFloat32();this.actOnCircularArc(b[0],b[1],e,a,this.sx(c))}};
F2D.prototype.parseCircle=function(){var a=this.stream,b=a.getVarints();this.parserAssert(b,F2dSemanticType.st_arc,"parseCircle")||(b=this.parsePointPositions(),a=a.getVarints(),this.actOnCompleteCircle(b[0],b[1],this.sx(a)))};
F2D.prototype.parseArc=function(){var a=this.stream,b=a.getVarints();if(!this.parserAssert(b,F2dSemanticType.st_arc,"parseArc")){var b=this.parsePointPositions(),c=a.getVarints(),e=a.getVarints(),d=a.getFloat32(),f=a.getFloat32(),a=a.getFloat32();this.actOnArc(b[0],b[1],f,a,this.sx(c),this.sy(e),d)}};
F2D.prototype.parseDataType=function(){var a=this.stream.getVarints();switch(a){case F2dDataType.dt_void:this.parseVoid();break;case F2dDataType.dt_int:this.parseInt();break;case F2dDataType.dt_object:this.parseObject();break;case F2dDataType.dt_varint:this.parseVarint();break;case F2dDataType.dt_point_varint:this.parsePoint();break;case F2dDataType.dt_float:this.parseFloat();break;case F2dDataType.dt_point_varint_array:this.parsePointsArray();break;case F2dDataType.dt_circular_arc:this.parseCircularArc();
break;case F2dDataType.dt_circle:this.parseCircle();break;case F2dDataType.dt_arc:this.parseArc();break;case F2dDataType.dt_int_array:this.parseIntArray();break;case F2dDataType.dt_varint_array:this.parseVarintArray();break;case F2dDataType.dt_byte_array:this.parseByteArray();break;case F2dDataType.dt_string:this.parseString();break;default:this.error=!0,debug("Data type not supported yet: "+a)}};
F2D.prototype.parse=function(){var a=this.stream=new InputStream(this.data),b=a.getString(3);if("F2D"!=b)debug("Invalid F2D header : "+b);else if(b=a.getString(2),"01"!=b)debug("Only support f2d major version 1; actual version is : "+b);else if("."!=a.getString(1))debug("Invalid version delimiter.");else{for(a.getString(2);a.offset<a.byteLength;){this.parseDataType();if(this.error)break;this.opCount++}this.flushBuffer(0,!0);this.data=this.stream=this.currentVbb=null;debug("F2d parse: data types count : "+
this.opCount)}};F2D.prototype.parseFrames=function(a){if(this.data)for(var b=this.stream=new InputStream(this.data);b.offset<b.byteLength;){this.parseDataType();if(this.error)break;this.opCount++}else a||debug("Unexpected F2D parse state: If there is no data, we only expect a flush command, but flush was false.");a&&this.flushBuffer(0,!0);this.data=this.stream=null};
F2D.prototype.actOnPolylinePointsArray=function(a){this.flushBuffer();this.numPolylines++;for(var b=a.length/2,c=a[0],e=a[1],d=1;d<b;++d){var f=a[2*d],g=a[2*d+1];this.currentVbb.addSegment(c,e,f,g,this.lineWeight,this.color,this.objectNumber,this.layer);c=f;e=g}this.numLineSegs+=b-1};F2D.prototype.actOnDot=function(a){this.actOnCompleteCircle(a[0],a[1],this.sx(1))};
F2D.prototype.actOnCompleteCircle=function(a,b,c){this.flushBuffer();this.numCircles++;this.fill?this.currentVbb.addSegment(a,b,a,b,2*c,this.color,this.objectNumber,this.layer,!0,!1,!0):this.currentVbb.addCircularArc(a,b,0,2*Math.PI,c,this.lineWeight,this.color,this.objectNumber,this.layer)};F2D.prototype.actOnCircularArc=function(a,b,c,e,d){this.numCircles++;this.flushBuffer();this.currentVbb.addCircularArc(a,b,c,e,d,this.lineWeight,this.color,this.objectNumber,this.layer)};
F2D.prototype.actOnArc=function(a,b,c,e,d,f,g){this.numEllipses++;this.flushBuffer();this.currentVbb.addEllipticalArc(a,b,c,e,d,f,g,this.lineWeight,this.color,this.objectNumber,this.layer)};
F2D.prototype.actOnRaster=function(){if(this.manifestAvailable){this.flushBuffer(4,!0);var a=this.parseObjState.raster,b=a.position,c=a.height,e=a.imageId,d=b[0],b=b[1],a=this.sx(a.width),c=this.sy(c),e={dataURI:this.imageId2URI[e],width:a,height:c};this.currentVbb.addTexturedQuad(d,b-c,a,c,this.objectNumber,this.layer);this.currentImage=e;this.flushBuffer(0,!0)}};F2D.prototype.actOnClip=function(){};F2D.prototype.actOnText=function(){};
F2D.prototype.addPolyTriangle=function(a,b,c,e,d,f,g){function l(a,b){if(a>b){var c=a;a=b;b=c}if(p[a]){var c=p[a],d=c.lastIndexOf(b);-1==d?c.push(b):c[d]=-1}else p[a]=[b]}function h(){for(var c=0,g=p.length;c<g;c++){var h=p[c];if(h)for(var k=0;k<h.length;k++){var l=h[k];-1!=l&&(m.flushBuffer(4),m.currentVbb.addSegment(a[2*c],a[2*c+1],a[2*l],a[2*l+1],r,b?b[c]:e,f,d),b&&b[c]!=b[l]&&debug("Gouraud triangle encountered. Will have incorrect antialiasing."))}}}function k(c,g){if(c>g){var h=c;c=g;g=h}(h=
p[c])&&-1!=h.indexOf(g)&&(m.flushBuffer(4),m.currentVbb.addSegment(a[2*c],a[2*c+1],a[2*g],a[2*g+1],r,b?b[c]:e,f,d),b&&b[c]!=b[g]&&debug("Gouraud triangle encountered. Will have incorrect antialiasing."))}var m=this,p=null,r=-1;this.objectStack[this.objectStack.length-1]==F2dSemanticType.st_text&&(r=-0.5);if(g)for(var p=Array(a.length/2),n=0,q=c.length;n<q;n+=3){var u=c[n],s=c[n+1],t=c[n+2];l(u,s);l(s,t);l(t,u)}if(this.currentVbb.useInstancing)for(q=c.length,n=0;n<q;n+=3)u=c[n],s=c[n+1],t=c[n+2],this.flushBuffer(4),
this.currentVbb.addTriangleGeom(a[2*u],a[2*u+1],a[2*s],a[2*s+1],a[2*t],a[2*t+1],b?b[u]:e,f,d),g&&(k(u,s),k(s,t),k(t,u));else{q=a.length/2;this.flushBuffer(q);u=this.currentVbb;s=u.vcount;for(n=0;n<q;++n)u.addVertexPolytriangle(a[2*n],a[2*n+1],0,0,0,b?b[n]:e,f,d);q=c.length;for(n=0;n<q;n+=3)u.addTriangle(s+c[n],s+c[n+1],s+c[n+2]);g&&h()}};
F2D.prototype.actOnPolyTriangle=function(){var a=this.parseObjState.polyTriangle;this.parseObjState.polyTriangle={};var b=a.points,c=a.indices,a=a.colors;b&&c?(this.numPolytriangles++,this.numTriangles+=c.length/3,this.addPolyTriangle(b,a,c,this.color,this.layer,this.objectNumber,!0)):debug("Malformed polytriangle.")};function F2DProbe(){this.data=null;this.frameEnd=this.frameStart=0;this.stream=null;this.opCount=0;this.marker={frameStart:this.frameStart,frameEnd:this.frameEnd}}
F2DProbe.prototype.load=function(a){this.data=a;this.frameStart=0;this.stream?(this.stream.reset(this.data),this.stream.seek(0),this.frameEnd=0):(this.stream=new CheckedInputStream(this.data),this.stream.seek(8),this.frameEnd=this.frameStart=8);this.probe();this.marker.frameStart=this.frameStart;this.marker.frameEnd=this.frameEnd;return this.marker};
var F2dProbeDataType={dt_object:0,dt_void:1,dt_byte:2,dt_int:3,dt_float:4,dt_double:5,dt_varint:6,dt_point_varint:7,dt_byte_array:32,dt_int_array:33,dt_float_array:34,dt_double_drray:35,dt_varint_array:36,dt_point_varint_array:37,dt_arc:38,dt_circle:39,dt_circular_arc:40,dt_string:63,dt_last_data_type:127},F2dProbeSemanticType={st_object_member:0,st_fill:1,st_fill_off:2,st_clip_off:3,st_layer:4,st_link:5,st_line_weight:6,st_miter_angle:7,st_miter_length:8,st_line_pattern_ref:9,st_back_color:10,st_color:11,
st_markup:12,st_object_id:13,st_markup_id:14,st_reset_rel_offset:15,st_font_ref:16,st_begin_object:32,st_clip:33,st_line_caps:34,st_line_join:35,st_line_pattern_def:36,st_font_def:37,st_sheet:42,st_arc:43,st_polyline:44,st_raster:45,st_text:46,st_polytriangle:47,st_dot:48,st_end_object:63,st_last_semantic_type:127};F2DProbe.prototype.readColor=function(){var a=this.stream;a.getVarints();a.getVarints();a.skipUint32()};F2DProbe.prototype.parsePointPositions=function(){this.stream.getVarints();this.stream.getVarints()};
F2DProbe.prototype.unhandledTypeWarning=function(a,b){debug("Unhandled semantic type when probing F2d : "+b+" in function "+a)};F2DProbe.prototype.parseObject=function(){this.stream.getVarints()};F2DProbe.prototype.parseString=function(){var a=this.stream;a.getVarints();var b=a.getVarints();a.skipBytes(b)};F2DProbe.prototype.parsePoint=function(){this.stream.getVarints();this.parsePointPositions()};
F2DProbe.prototype.parseVarintArray=function(){var a=this.stream;a.getVarints();for(var b=a.getVarints(),c=0;c<b;++c)a.getVarints()};F2DProbe.prototype.parseByteArray=function(){var a=this.stream;a.getVarints();var b=a.getVarints();a.skipBytes(b)};F2DProbe.prototype.parseEndOfObject=function(){var a=this.stream;a.getVarints();a.getVarints()};F2DProbe.prototype.parsePointsArray=function(a){a=this.stream;a.getVarints();if(a=a.getVarints()){a/=2;for(var b=0;b<a;++b)this.parsePointPositions()}};
F2DProbe.prototype.parsePoint=function(a){this.stream.getVarints();this.parsePointPositions()};F2DProbe.prototype.parseInt=function(){var a=this.stream,b=a.getVarints();switch(b){case F2dProbeSemanticType.st_color:a.skipUint32();break;case F2dProbeSemanticType.st_fill:a.skipUint32();break;default:a.skipUint32(),this.unhandledTypeWarning("parseInt",b)}};
F2DProbe.prototype.parseVoid=function(){var a=this.stream.getVarints();switch(a){case F2dProbeSemanticType.st_fill_off:break;default:this.unhandledTypeWarning("parseVoid",a)}};F2DProbe.prototype.parseVarint=function(){this.stream.getVarints();this.stream.getVarints()};F2DProbe.prototype.parseIntArray=function(){var a=this.stream;a.getVarints();for(var b=a.getVarints(),c=0;c<b;++c)a.skipUint32()};F2DProbe.prototype.parseFloat=function(){var a=this.stream;a.getVarints();a.getFloat32()};
F2DProbe.prototype.parseCircularArc=function(){var a=this.stream;a.getVarints();this.parsePointPositions();a.getVarints();a.getFloat32();a.getFloat32()};F2DProbe.prototype.parseCircle=function(){var a=this.stream;a.getVarints();this.parsePointPositions();a.getVarints()};F2DProbe.prototype.parseArc=function(){var a=this.stream;a.getVarints();this.parsePointPositions();a.getVarints();a.getVarints();a.getFloat32();a.getFloat32();a.getFloat32()};
F2DProbe.prototype.parseDataType=function(){var a=this.stream.getVarints();switch(a){case F2dProbeDataType.dt_void:this.parseVoid();break;case F2dProbeDataType.dt_int:this.parseInt();break;case F2dProbeDataType.dt_object:this.parseObject();break;case F2dProbeDataType.dt_varint:this.parseVarint();break;case F2dProbeDataType.dt_float:this.parseFloat();break;case F2dProbeDataType.dt_point_varint:this.parsePoint();break;case F2dProbeDataType.dt_point_varint_array:this.parsePointsArray();break;case F2dProbeDataType.dt_circular_arc:this.parseCircularArc();
break;case F2dProbeDataType.dt_circle:this.parseCircle();break;case F2dProbeDataType.dt_arc:this.parseArc();break;case F2dProbeDataType.dt_varint_array:this.parseVarintArray();break;case F2dProbeDataType.dt_int_array:this.parseIntArray();break;case F2dProbeDataType.dt_byte_array:this.parseByteArray();break;case F2dProbeDataType.dt_string:this.parseString();break;default:this.error=!0,debug("Bad op code encountered : "+a+" , bail out.")}this.error||(this.frameEnd=this.stream.offset)};
F2DProbe.prototype.probe=function(){var a=this.stream;try{for(;a.offset<a.byteLength;){this.parseDataType();if(this.error)break;this.opCount++}}catch(b){}};function CheckedInputStream(a){this.buffer=a;this.offset=0;this.byteLength=a.length;this.convBuf=new ArrayBuffer(8);this.convUint8=new Uint8Array(this.convBuf);this.convUint16=new Uint16Array(this.convBuf);this.convInt32=new Int32Array(this.convBuf);this.convUint32=new Uint32Array(this.convBuf)}
function OutOfBoundsBufferAccessException(a){this.offset=a;this.message="try to access an offset that is out of bounds: "+this.offset;this.toString=function(){return this.message}}CheckedInputStream.prototype.boundsCheck=function(a){if(a>=this.byteLength)throw new OutOfBoundsBufferAccessException(a);};CheckedInputStream.prototype.seek=function(a){this.boundsCheck(a);this.offset=a};
CheckedInputStream.prototype.getBytes=function(a){this.boundsCheck(this.offset+a);var b=new Uint8Array(this.buffer.buffer,this.offset,a);this.offset+=a;return b};CheckedInputStream.prototype.skipBytes=function(a){this.boundsCheck(this.offset+a);this.offset+=a};CheckedInputStream.prototype.getVarints=function(){var a,b=0,c=0;do this.boundsCheck(this.offset),a=this.buffer[this.offset++],b|=(a&127)<<c,c+=7;while(a&128);return b};
CheckedInputStream.prototype.getUint8=function(){this.boundsCheck(this.offset+1);return this.buffer[this.offset++]};CheckedInputStream.prototype.getUint16=function(){this.boundsCheck(this.offset+2);this.convUint8[0]=this.buffer[this.offset++];this.convUint8[1]=this.buffer[this.offset++];return this.convUint16[0]};CheckedInputStream.prototype.getInt16=function(){var a=this.getUint16();32767<a&&(a|=4294901760);return a};
CheckedInputStream.prototype.getInt32=function(){this.boundsCheck(this.offset+4);var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convInt32[0]};CheckedInputStream.prototype.getUint32=function(){this.boundsCheck(this.offset+4);var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convUint32[0]};
CheckedInputStream.prototype.skipUint32=function(){this.boundsCheck(this.offset+4);this.offset+=4};CheckedInputStream.prototype.getFloat32=function(){this.boundsCheck(this.offset+4);this.offset+=4;return 0};CheckedInputStream.prototype.getFloat64=function(){this.boundsCheck(this.offset+8);this.offset+=8;return 0};CheckedInputStream.prototype.reset=function(a){this.buffer=a;this.offset=0;this.byteLength=a.length};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.inWorkerThread="undefined"!==typeof self&&"undefined"===typeof window;Autodesk.Viewing.Private.RefreshTokenHandler=function(){};Autodesk.Viewing.Private.RefreshTokenHandler.prototype.shouldRefreshToken=function(a,b,c){return 401===a};Autodesk.Viewing.Private.RefreshTokenHandler.prototype.refreshToken=function(a,b){};Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler=function(){Autodesk.Viewing.Private.RefreshTokenHandler.call(this)};
Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype=Object.create(Autodesk.Viewing.Private.RefreshTokenHandler.prototype);Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype.constructor=Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler;
Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype.shouldRefreshToken=function(a,b,c){b=!1;401===a?(a="string"===typeof c&&""!==c?JSON.parse(c):c,b=""===c||a.hasOwnProperty("errorCode")&&"AUTH-006"===a.errorCode):b=403===a;return b};
Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype.refreshToken=function(a,b){var c=null;Autodesk.Viewing.Private.refreshToken&&(c=Autodesk.Viewing.Private.refreshToken());c?0===Autodesk.Viewing.Private.env.indexOf("Autodesk")?Autodesk.Viewing.Private.setApigeeTokenInCookie(c,a,b):Autodesk.Viewing.Private.setAuthTokenInCookie(c,a,b):b&&b(null)};Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler=function(){Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.call(this)};
Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler.prototype=Object.create(Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype);Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler.prototype.constructor=Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler;
Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler.prototype.refreshToken=function(a,b){Autodesk.Viewing.Private.inWorkerThread?(self.addEventListener("message",function(c){c.data&&c.data.tokenRefreshed?a(c):b(c)}),self.postMessage({refreshToken:!0})):Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype.refreshToken.call(this,a,b)};Autodesk.Viewing.Private.Xhr=function(a,b){this.request=new XMLHttpRequest;this.withCredentials=a;this.refreshTokenHandler=b};
Autodesk.Viewing.Private.Xhr.prototype.generateUrl=function(a,b){var c=this.getDefaultQueryParameters();b&&(c+="&"+b);c&&(a=a+"?"+c);return a};Autodesk.Viewing.Private.Xhr.prototype.getDefaultHeaders=function(){return{}};Autodesk.Viewing.Private.Xhr.prototype.getDefaultQueryParameters=function(){return""};Autodesk.Viewing.Private.Xhr.prototype.addHeaders=function(a){var b=this.getDefaultHeaders();if(a)for(var c in a)b[c]=a[c];for(var e in b)this.request.setRequestHeader(e,b[e])};
Autodesk.Viewing.Private.Xhr.prototype.get=function(a,b,c,e){var d=this;e=e?e:{};a=d.generateUrl(a,e?e.queryParams:null);try{var f=e.hasOwnProperty("asynchronous")?e.asynchronous:!0;d.request.open("GET",a,f);e.hasOwnProperty("responseType")&&(d.request.responseType=e.responseType);d.request.withCredentials=d.withCredentials;d.addHeaders(e.hasOwnProperty("headers")?e.headers:[]);var g=function(f){(e.hasOwnProperty("retryOnAuthenticationFail")?e.retryOnAuthenticationFail:1)&&d.refreshTokenHandler&&
d.refreshTokenHandler.shouldRefreshToken(d.request.status,d.request.statusText,"text"===d.request.responseType||""===d.request.responseType?d.request.responseText:"")?d.refreshTokenHandler.refreshToken(function(f){d.request=new XMLHttpRequest;e.retryOnAuthenticationFail=!1;d.get(a,b,c,e)},function(b){c(d.request.status,d.request.statusText,{url:a})}):c(d.request.status,d.request.statusText,{url:a})},l=function(a){200===d.request.status?b(d.request.response?d.request.response:d.request.responseText):
g(a)};f&&(d.request.onload=l,d.request.onerror=g,d.request.ontimeout=g);d.request.send();f||l(null)}catch(h){c(d.request.status,d.request.statusText,{url:a,exception:h})}};
Autodesk.Viewing.Private.ViewingServiceXhr=function(a,b,c){var e=c&&c.hasOwnProperty("refreshTokenHandler")?c.refreshTokenHandler:new Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler;this.withCredentials=!0;c&&c.hasOwnProperty("withCredentials")&&(this.withCredentials=c.withCredentials);Autodesk.Viewing.Private.Xhr.call(this,this.withCredentials,e);this.api=b;this.baseUrl=a;this.options=c};Autodesk.Viewing.Private.ViewingServiceXhr.prototype=Object.create(Autodesk.Viewing.Private.Xhr.prototype);
Autodesk.Viewing.Private.ViewingServiceXhr.prototype.constructor=Autodesk.Viewing.Private.ViewingServiceXhr;
Autodesk.Viewing.Private.ViewingServiceXhr.prototype.generateUrl=function(a,b){if(0===a.indexOf("urn:")){"items"!==this.api&&(a=a.substr(4));var c=this.options&&this.options.hasOwnProperty("encodeUrn")?this.options.encodeUrn:!0;a="bubbles"===this.api&&0==Autodesk.Viewing.Private.env.indexOf("Autodesk")?this.baseUrl+"/"+(c?encodeURIComponent(a):a):this.baseUrl+"/"+this.api+"/"+(c?encodeURIComponent(a):a)}return Autodesk.Viewing.Private.Xhr.prototype.generateUrl.call(this,a,b)};
var Xhr=function(){var a=function(a,c,e){this.xhr=new XMLHttpRequest;this.errorHandler=a;this.success=!1;this.viewing_url=e;this.auth=c};a.prototype.generateUrl=function(a,c,e){var d=a.indexOf("urn:");0===d&&this.viewing_url&&((e=e&&e.feature?e.feature:null)?"render"==e?(a=a.substr(4),a=this.viewing_url+"/"+e+"/"+encodeURIComponent(a)):"bubbles"==e?(a=a.substr(4),a=this.viewing_url+"/"+e+"/"+encodeURIComponent(a)):"comments"==e?(a=a.substr(4),a=this.viewing_url+"/"+e+"/file/"+encodeURIComponent(a)):
a=this.viewing_url+"/"+e+"/"+encodeURIComponent(a.substr(d)):a=this.viewing_url+"/items/"+encodeURIComponent(a.substr(d)));c&&(a=a+"?"+c);return a};a.prototype.addHeaders=function(a){for(var c in a)this.xhr.setRequestHeader(c,a[c])};a.prototype.get=function(a,c,e,d,f,g){a=this.generateUrl(a,g,{feature:f});try{this.xhr.open("GET",a,!!d),this.xhr.responseType=e,this.success=!1,this.auth&&(this.xhr.withCredentials=!0),d&&(this.xhr.onload=d),this.addHeaders(c),this.xhr.send()}catch(l){return this.errorHandler&&
this.errorHandler.networkFailure(a,l),null}this.errorCheck(a,200);return this.xhr.response};a.prototype.post=function(a,c,e,d,f,g){a=this.generateUrl(a,null,{feature:g});c["Content-Type"]||(c["Content-Type"]="application/json");try{this.xhr.open("POST",a,!!f),this.xhr.responseType=d,this.success=!1,this.auth&&(this.xhr.withCredentials=!0),f&&(this.xhr.onload=f),this.addHeaders(c),this.xhr.send(e)}catch(l){return this.errorHandler&&this.errorHandler.networkFailure(a,l),null}this.errorCheck(a,200,201);
return this.xhr.response};a.prototype.getRange=function(a,c,e,d,f,g){a=this.generateUrl(path);c.Range="bytes="+d+"-"+f;try{this.xhr.open("GET",a,!!g),this.xhr.responseType=e,this.success=!1,this.auth&&(this.xhr.withCredentials=!0),g&&(this.xhr.onload=g),this.addHeaders(c),this.xhr.send()}catch(l){return this.errorHandler&&this.errorHandler.networkFailure(a,l),null}this.errorCheck(a,206);return this.xhr.response};a.prototype.head=function(a){a=this.generateUrl(path);try{this.xhr.open("GET",a,!1),this.success=
!1,this.auth&&(this.xhr.withCredentials=!0),this.addHeaders([]),this.xhr.send()}catch(c){return this.errorHandler&&this.errorHandler.networkFailure(a,c),null}this.errorCheck(a,200);a=[];a["Accept-Ranges"]=this.xhr.getResponseHeader("Accept-Ranges");a["Content-Length"]=this.xhr.getResponseHeader("Content-Length");return a};a.prototype.errorCheck=function(a,c){if(4===this.xhr.readyState&&this.xhr.status){var e;for(e=1;e<arguments.length&&this.xhr.status!==arguments[e];e++);e===arguments.length&&this.errorHandler?
this.errorHandler.unsuccessfulResponse(a,this.xhr.status,this.xhr.statusText):this.success=!0}else this.success=!0};return a}(),XhrErrorHandler=function(){var a=function(a){this.host=a;this.ignoreFileNotFound=!1};a.prototype.networkFailure=function(a,c){this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_FAILURE,"Network failure",{url:a,exception:c.toString(),stack:c.stack})};a.prototype.unsuccessfulResponse=function(a,c,e){403==c?this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_ACCESS_DENIED,
"Access denied to remote resource",{url:a,httpStatus:c,httpStatusText:e}):404==c?this.ignoreFileNotFound||this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_FILE_NOT_FOUND,"Remote resource not found",{url:a,httpStatus:c,httpStatusText:e}):500<=c&&600>c?this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_SERVER_ERROR,"Server error when accessing resource",{url:a,httpStatus:c,httpStatusText:e}):this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_UNHANDLED_RESPONSE_CODE,"Unhandled response code from server",
{url:a,httpStatus:c,httpStatusText:e})};return a}();
function doGeomLoad(a,b){(new Autodesk.Viewing.Private.ViewingServiceXhr(b.viewing_url,"items",{withCredentials:!!b.auth})).get(b.url,function(c){a.postMessage({url:b.url,workerId:b.workerId,progress:0.5});try{var e=new PackFileReader(new Uint8Array(c))}catch(d){a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Unhandled exception while reading pack file",{url:b.url,exception:d.toString(),stack:d.stack});a.postMessage(null);return}for(var f=c=!1,g={packId:b.packId,meshIndex:0,mesh:null,workerId:b.workerId,
progress:0},l=0,h=e.getEntryCounts();l<h;l++){try{var k=readGeometry(e,l,null)}catch(m){f||(a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Unhandled exception while reading geometry",{url:b.url,exception:m.toString(),stack:m.stack}),c=f=!0,debug(m.stack)),k=null}g.meshIndex=l;g.mesh=k;g.progress=0.5+(l+1)/h*0.5;if(k){var p=[];p.push(k.vb.buffer);a.postMessage(g,p)}else c||(a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Unable to load geometry",{url:b.url}),c=!0),a.postMessage(g)}},b.onFailureCallback,
{responseType:"arraybuffer",asynchronous:!1,headers:b.headers,queryParams:b.queryParams})}
function doLoadSvf(a,b){(new Autodesk.Viewing.Private.ViewingServiceXhr(b.viewing_url,"items",{withCredentials:!!b.auth})).get(b.url,function(c){a.postMessage({progress:0.5});var e=new Package;b.loadDoneCB=function(c){c?a.postMessage({svf:e}):(a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Failure while loading SVF",{url:b.url}),a.postMessage(null))};try{e.load(b,new Uint8Array(c))}catch(d){a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Unhandled exception while loading SVF",{url:b.url,exception:d.toString(),
stack:d.stack}),a.postMessage(null)}},b.onFailureCallback,{responseType:"arraybuffer",asynchronous:!1,headers:b.headers,queryParams:b.queryParams})}var propdb=null,propdbFailed=!1,propdbURL="";
function loadPropertyPacks(a,b,c){function e(b){if(!b){if(g){propdbFailed=!0;c(null);return}g=!0;b=[];b.push({filename:"objects_attrs.json",storage:d.attrs});b.push({filename:"objects_vals.json",storage:d.values});b.push({filename:"objects_avs.json",storage:d.avs});b.push({filename:"objects_offs.json",storage:d.offsets});f=b}0===f.length?(propdb=new PropertyDatabase(d),c(propdb),propdbFailed=!1,propdbURL=a.url):(b=f.shift(),requestFile(b.filename,a,e,b.storage))}if(propdb&&a.url===propdbURL)c(propdb);
else if(propdbFailed)c(null);else if(b=a.propertydb){var d={ids:{},attrs:{},offsets:{},values:{},avs:{}},f=[];f.push({filename:b.attrs.length?b.attrs[0]:"objects_attrs.json.gz",storage:d.attrs});f.push({filename:b.values.length?b.values[0]:"objects_vals.json.gz",storage:d.values});f.push({filename:b.avs.length?b.avs[0]:"objects_avs.json.gz",storage:d.avs});f.push({filename:b.offsets.length?b.offsets[0]:"objects_offs.json.gz",storage:d.offsets});for(b=0;b<f.length;b++)f[b].filename=f[b].filename.replace(/\\/g,
"/");var g=!1;b=f.shift();requestFile(b.filename,a,e,b.storage)}else propdbFailed=!0,c(null)}function doPropertyGet(a,b){var c=b.dbId;loadPropertyPacks(b,c,function(b){b&&(b=b.getObjectProperties(c),a.postMessage({result:b,dbId:c}))})}
function computeTreeBBoxes(a,b,c){var e=6*a.dbId;b[e]=b[e+1]=b[e+2]=Infinity;b[e+3]=b[e+4]=b[e+5]=-Infinity;var d=a.children;if(d)for(var f=0,g=d.length;f<g;f++){computeTreeBBoxes(d[f],b,c);for(var l=6*(d[f].dbId|0),h=0;3>h;h++)b[e+h]>b[l+h]&&(b[e+h]=b[l+h]),b[e+h+3]<b[l+h+3]&&(b[e+h+3]=b[l+h+3])}if(void 0!==a.fragIds)if(!Array.isArray(a.fragIds))for(d=6*(a.fragIds|0),h=0;3>h;h++)b[e+h]>c[d+h]&&(b[e+h]=c[d+h]),b[e+h+3]<c[d+h+3]&&(b[e+h+3]=c[d+h+3]);else if(a.fragIds.length)for(f=0;f<a.fragIds.length;f++)for(d=
6*(a.fragIds[f]|0),h=0;3>h;h++)b[e+h]>c[d+h]&&(b[e+h]=c[d+h]),b[e+h+3]<c[d+h+3]&&(b[e+h+3]=c[d+h+3])}function buildDbIdToFragMap(a){for(var b={},c=0,e=a.length;c<e;c++){var d=a[c],f=b[d];void 0===f?b[d]=c:Array.isArray(f)?f.push(c):b[d]=[f,c]}return b}
function doObjectTreeParse(a,b){loadPropertyPacks(b,null,function(c){if(c){var e;b.fragToDbId&&(e=buildDbIdToFragMap(b.fragToDbId));var d=c.findRootNodes(),f,g=[0],l=c.getObjectCount();if(d&&d.length)if(1==d.length)f={dbId:d[0]},c.buildObjectTree(f,e,0,g);else{f={dbId:0,children:[]};for(var h=0;h<d.length;h++){var k={dbId:d[h]};f.children.push(k);c.buildObjectTree(k,e,0,g)}}a.postMessage({instanceTree:f,maxTreeDepth:g[0],objectCount:l});b.fragBoxes&&(c=new Float32Array(6*c.getObjectCount()),computeTreeBBoxes(f,
c,b.fragBoxes),a.postMessage({instanceBoxes:c}))}else a.postMessage({instanceTree:null,maxTreeDepth:0})})}
function requestFile(a,b,c,e){var d=b.url+a,f=null,f=-1!==d.indexOf(".gz",d.length-3)?function(b){try{var f=new Uint8Array(b);31==f[0]&&139==f[1]&&(f=(new Zlib.Gunzip(f)).decompress());e[a]=f;c(f)}catch(h){self.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Malformed data received when requesting file",{url:d,exception:h.toString(),stack:h.stack}),c(null)}}:function(b){e[a]=rawbuf;c(new Uint8Array(b))};(new Autodesk.Viewing.Private.ViewingServiceXhr(b.viewing_url,"items",{withCredentials:!!b.auth})).get(d,
f,function(a,d,e){if(404!==a)b.onFailureCallback(a,d,e);c(null)},{responseType:"arraybuffer",asynchronous:!1,headers:b.headers,queryParams:b.queryParams})}function doPropertySearch(a,b){loadPropertyPacks(b,null,function(c){c&&(c=c.bruteForceSearch(b.searchText),a.postMessage(c))})}
function doParseF2D(a,b){if(b.data){a.postMessage({progress:0.5});var c=new F2D(b.metadata,b.manifest,b.basePath,b.f2dLoadOptions);b.loadDoneCB=function(b){b?a.postMessage({f2d:c}):(a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"",{}),a.postMessage(null))};try{c.load(b,new Uint8Array(b.data))}catch(e){a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"",{exception:e.toString(),stack:e.stack}),a.postMessage(null)}}else a.postMessage(null)}
function doParseF2DFrame(a,b){f2d||(a.postMessage({progress:0.5}),f2d=new F2D(b.metadata,b.manifest,b.basePath,b.f2dLoadOptions),f2d.F2D_MESH_COUNT_OLD=0,a.postMessage({f2dframe:f2d}));b.loadDoneCB=function(c){if(c){if(f2d.meshes.length){c={f2dframe:!0,meshes:f2d.meshes,baseIndex:f2d.F2D_MESH_COUNT_OLD,maxObjectNumber:f2d.maxObjectNumber,bbox:f2d.bbox};b.finalFrame&&(c.finalFrame=!0);for(var d=[],f=0,g=f2d.meshes.length;f<g;++f)d.push(f2d.meshes[f].vb.buffer),d.push(f2d.meshes[f].indices.buffer);
a.postMessage(c,d);f2d.F2D_MESH_COUNT_OLD+=f2d.meshes.length;f2d.meshes=[]}}else a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"",{}),a.postMessage(null)};try{f2d.loadFrames(b)}catch(c){a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"",{exception:c.toString(),stack:c.stack}),a.postMessage(null)}}var ENABLE_F2D_STREAMING_MODE=!0;
function requestFileF2D(a,b){b.errorHandler.ignoreFileNotFound=!0;var c=new Xhr(b.errorHandler,b.auth,b.viewing_url);if(-1!==a.indexOf(".gz",a.length-3)){var e=c.get(a,b.headers,"arraybuffer");if(c.success)try{var d=new Uint8Array(e);31==d[0]&&139==d[1]&&(d=(new Zlib.Gunzip(d)).decompress());return d}catch(f){return self.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Malformed data received when requesting file",{url:a,exception:f.toString(),stack:f.stack}),null}else return null}else return e=c.get(a,
b.headers,"arraybuffer"),c.success?new Uint8Array(e):null}
function doStreamF2D(a,b){function c(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);a=decodeURIComponent(escape(b));return JSON.parse(a)}function e(a,b){for(var c=a.length-b,d=new ArrayBuffer(c),e=new Uint8Array(d,0),f=0,g=b;f<c;f++,g++)e[f]=a.charCodeAt(g)&255;return d}var d=b.url,f=requestFileF2D(b.basePath+"metadata.json.gz",b),g=requestFileF2D(b.basePath+"manifest.json.gz",b);try{f&&(f=c(f)),g&&(g=c(g))}catch(l){g=f=null}if(f){var h;if(g&&g.assets)for(var k=g.assets,m=0;m<k.length;m++)if(-1!=
d.indexOf(k[m].URI)){h=k[m].usize||0;break}var p=new XMLHttpRequest;p.withCredentials=!!b.auth;var r=new F2DProbe,n=0,q=0,u=!1;p.onreadystatechange=function(){try{if(4==p.readyState){if(ENABLE_F2D_STREAMING_MODE&&0<q){var c=p.responseText,d={type:"F2DSTREAM",finalFrame:!0,finished:!0,progress:1},k=[];u||(d.manifest=g,d.metadata=f,d.basePath=b.basePath,u=!0);if(c.length>q){var l=e(c,q),m=new Uint8Array(l),s=r.load(m),t=l.slice(s.frameStart,s.frameEnd);s.frameEnd>s.frameStart&&(k.push(t),d.frames=t)}debug("Total text bytes count : "+
p.responseText.length);a.postMessage(d,k);return}c=p.responseText;l=e(c,0);d={type:"F2DBLOB",metadata:f,manifest:g,basePath:b.basePath,progress:1,buffer:l};k=[];k.push(l);a.postMessage(d,k)}if(2<p.readyState&&ENABLE_F2D_STREAMING_MODE&&(c=p.responseText,!(q+65536>c.length))){l=e(c,q);if(!n){++n;var D=new Uint8Array(l);if(31==D[0]&&139==D[1]){ENABLE_F2D_STREAMING_MODE=!1;return}}m=new Uint8Array(l);s=r.load(m);s.frameEnd>s.frameStart&&(t=l.slice(s.frameStart,s.frameEnd),q+=s.frameEnd,k=[],k.push(t),
d={type:"F2DSTREAM",frames:t,finalFrame:!1},h&&(d.progress=q/h),u||(d.manifest=g,d.metadata=f,d.basePath=b.basePath,u=!0),a.postMessage(d,k))}}catch(F){debug(F.message)}};try{p.open("GET",d,!0);if(b.headers)for(var s in b.headers)p.setRequestHeader(s,b.headers[s]);p.overrideMimeType("text/plain; charset=x-user-defined");p.send()}catch(t){debug(t.message)}}else self.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"")}
var defaultCloudRenderConfig={ConsumerServiceKey:"Viewing",ProductVersion:"2014",UserInfo:{UserID:"",EmailFlag:"true"},Scenes:[{SceneInfo:{SourceFileInfo:{Type:"S3",AccessLevel:"Private"},FileUri:"",SceneId:"FireflyJSDefaultSceneId"},Renderings:[{ImageInfo:{Actions:["Render","ToneMap"],ProductionVersion:"SparkViewer",ImageParams:{RenderResolutionY:1500,RenderResolutionX:2E3,RenderImageFormat:"PNG"},Render:{RenderQuality:"standard",RenderCameraName:"",RenderingType:"image",ExposureType:"Customized"},
ToneMap:{BaseExposure:-9.5,OffsetExposure:0,ExposureValue:14,Shadows:0.2,Midtones:1,Highlights:0.25,WhitePoint:6500,Saturation:1,Type:"Cameraresponse"},EnvironmentOverridePreset:"studio_01",CameraOverride:{Units:"MILLIMETER",FocalDistance:0,Aperture:0,View:{Eye:[-4026.55,2722.32,-527.835],At:[0.834734,-0.454954,-0.310218],Up:[0.233914,-0.0868021,0.968375]},Projection:{isOrthographic:!1,Extent:1,ImageShift:[0,0],NativeAspect:1}}}}]}]};
function doCloudRendering(a,b){var c=new Xhr(b.errorHandler,b.auth,b.viewing_url),e=defaultCloudRenderConfig,d=b.camera,f=b.canvas,g=b.imageNo,l=b.exposureBias,h=b.currentLightPreset,k=new THREE.Vector3;k.x=d.target.x-d.position.x;k.y=d.target.y-d.position.y;k.z=d.target.z-d.position.z;k.normalize();var m=new THREE.Vector3;m.crossVectors(k,d.up);m.normalize();debug("Transform: "+m.x+" "+m.y+" "+m.z+" 0 "+d.up.x+" "+d.up.y+" "+d.up.z+" 0 "+k.x+" "+k.y+" "+k.z+" 0 "+d.position.x+" "+d.position.y+" "+
d.position.z+" 1");var p;1===b.upVector[0]?(m=[d.position.z,d.position.y,d.position.x],k=[k.z,k.y,k.x],p=[d.up.z,d.up.y,d.up.x]):1===b.upVector[1]?(m=[d.position.x,-d.position.z,d.position.y],k=[k.x,-k.z,k.y],p=[d.up.x,-d.up.z,d.up.y]):-1===b.upVector[0]?(m=[d.position.z,-d.position.y,-d.position.x],k=[k.z,-k.y,-k.x],p=[d.up.z,-d.up.y,-d.up.x]):-1===b.upVector[1]?(m=[-d.position.x,-d.position.z,-d.position.y],k=[-k.x,-k.z,-k.y],p=[-d.up.x,-d.up.z,-d.up.y]):-1===b.upVector[2]?(m=[-d.position.x,d.position.y,
-d.position.z],k=[-k.x,k.y,-k.z],p=[-d.up.x,d.up.y,-d.up.z]):(m=[d.position.x,d.position.y,d.position.z],k=[k.x,k.y,k.z],p=[d.up.x,d.up.y,d.up.z]);e.Scenes[0].Renderings[0].ImageInfo.CameraOverride.View.Eye=m;e.Scenes[0].Renderings[0].ImageInfo.CameraOverride.View.At=k;e.Scenes[0].Renderings[0].ImageInfo.CameraOverride.View.Up=p;e.Scenes[0].Renderings[0].ImageInfo.ImageParams.RenderResolutionX=f.width;e.Scenes[0].Renderings[0].ImageInfo.ImageParams.RenderResolutionY=f.height;e.Scenes[0].Renderings[0].ImageInfo.ToneMap.BaseExposure=
l;debug("currentLightPreset = "+h);var r;1===h?r="studio_01":3===h?r="grey_room":4===h?r="photobooth":8===h?r="riverbank":10===h?r="mi360_Plaza":11===h?r="field":12===h?r="crossroads":13===h?r="seaport":14===h?r="mi360_Snow":15===h&&(r="boardwalk");e.Scenes[0].Renderings[0].ImageInfo.EnvironmentOverridePreset=r;debug("Render config is : "+JSON.stringify(e));d=THREE.Math.degToRad(d.fov);0>=d&&(d=1E-4);e.Scenes[0].Renderings[0].ImageInfo.CameraOverride.Projection.Extent=d;debug("fov in radius = "+d);
debug("CameraOverrides: "+JSON.stringify(e.Scenes[0].Renderings[0].ImageInfo.CameraOverride));b.headers["x-ads-mode"]="verbatim";e=c.post(b.url,b.headers,JSON.stringify(e),"text",null,"render");debug(e);var n=JSON.parse(e)[0].JobId;debug("rendering job kicked off with render job id: "+n);a.postMessage({progress:"progress"});var q=setInterval(function(){var d=c.get(b.url,b.headers,"text",null,"render",b.queryParams?b.queryParams+"&jobid="+n:"jobid="+n);debug("from rendering worker : "+d);var d=JSON.parse(d).renderings[0],
e=d.JobInfo.JobStatus;"Complete"==e?(debug("rendering job :"+n+" finished."),d={renderings:{thumbnail:d.Storage.Output.Thumbnail,preview:d.Storage.Output.Preview,image:d.Storage.Output.Image,renderResolutionX:d.ImageParams.RenderResolutionX,renderResolutionY:d.ImageParams.RenderResolutionY,imageNo:g}},a.postMessage(d),clearInterval(q)):"Error"==e&&(d={error:{imageNo:g}},a.postMessage(d),clearInterval(q))},1E4)}
function doSvfToSpd(a,b){var c=new Xhr(b.errorHandler,b.auth,b.viewing_url),e={urn:"dXJuOmFkc2suczM6ZGVyaXZlZC5maWxlOlZpZXdpbmdTZXJ2aWNlVGVzdEFwcC91c2Vycy9NaWNoYWVsX0hhbmAvQVZFTlRBRE9SIExQNzAwLmYzZA",registerType:{rendering:{}}};e.urn=b.svfUrn;debug("svf to spd config : "+JSON.stringify(e));var d=c.post(b.url,b.headers,JSON.stringify(e),"text",null,"bubbles");debug(d);a.postMessage({translationProgress:"progress"});var f,g=setInterval(function(){var d=c.get(b.url+e.urn,b.headers,"text",null,"bubbles",
null);debug("from Svf to Spd worker : "+d);var d=JSON.parse(d),d=getValues(d,"urn"),h;for(h in d)if(-1!=d[h].indexOf(".spd")){f=d[h];break}void 0!=f&&(a.postMessage({translation:{spdUrn:f,camera:b.camera,imageNo:b.imageNo}}),clearInterval(g))},1E3);setTimeout(function(){void 0===f&&(a.postMessage({translationError:{imageNo:b.imageNo}}),clearInterval(g))},3E4)}
function getValues(a,b){var c=[],e;for(e in a)a.hasOwnProperty(e)&&("object"==typeof a[e]?c=c.concat(getValues(a[e],b)):e==b&&c.push(a[e]));return c}AutodeskNamespace("Autodesk.Viewing");Autodesk.Viewing.ESCAPE_EVENT="escape";Autodesk.Viewing.PROGRESS_UPDATE_EVENT="progress";Autodesk.Viewing.FULLSCREEN_MODE_EVENT="fullScreenMode";Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT="navmode";Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT="viewerStateRestored";Autodesk.Viewing.VIEWER_RESIZE_EVENT="viewerResize";
Autodesk.Viewing.TOOLBAR_CREATED_EVENT="toolbarCreated";Autodesk.Viewing.VIEWER_UNINITIALIZED="viewerUninitialized";
Autodesk.Viewing.Viewer=function(a,b){this.clientContainer=a;this.container=document.createElement("div");this.container.className="adsk-viewing-viewer";this.container.style.height="100%";this.container.style.width="100%";this.container.style.overflow="hidden";this.container.classList.add(isTouchDevice()?"touch":"notouch");this.clientContainer.appendChild(this.container);this.listeners={};this.dockingPanels=[];this.config=b;this.contextMenu=null;this.contextMenuCallbacks={};this.__firefoxLMBfix=!1;
this.screenModeDelegateClass=this.screenModeDelegate=null;this.setScreenModeDelegate(b?b.screenModeDelegate:void 0);this.loadedExtensions={};this.started=!1};Autodesk.Viewing.Viewer.prototype={load:function(a,b){throw"bool load(urn, function(void)) must be implemented.  For more details, read the Viewer class documentation.";}};
Autodesk.Viewing.Viewer.prototype.start=function(){if(this.started)return 0;var a=this.initialize();if(0===a&&(this.started=!0,this.config&&this.config.hasOwnProperty("extensions")))for(var b=this.config.extensions,c=0;c<b.length;++c)this.loadExtension(b[c],this.config);return a};
Autodesk.Viewing.Viewer.prototype.initialize=function(){var a=this;this.onResizeCallback=function(b){a.resize()};window.addEventListener("resize",this.onResizeCallback,!1);if(!this.config||(this.config.hasOwnProperty("disableBrowserContextMenu")?this.config.disableBrowserContextMenu:1))this.onDefaultContextMenu=function(a){a.preventDefault()},this.container.addEventListener("contextmenu",this.onDefaultContextMenu,!1);this.initContextMenu();this.localize()};
Autodesk.Viewing.Viewer.prototype.uninitialize=function(){this.onDefaultContextMenu&&this.container.removeEventListener("contextmenu",this.onDefaultContextMenu,!1);this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container);this.container=null;this.screenModeDelegate&&(this.screenModeDelegate.uninitialize(),this.screenModeDelegate=null);this.config=this.clientContainer=null;this.listeners={};this.dockingPanels=[];this.contextMenuCallbacks=this.contextMenu=null;
window.removeEventListener("resize",this.onResizeCallback,!1);this.fireEvent({type:Autodesk.Viewing.VIEWER_UNINITIALIZED})};Autodesk.Viewing.Viewer.prototype.finish=function(){for(var a in this.loadedExtensions)this.unloadExtension(a);this.uninitialize()};Autodesk.Viewing.Viewer.prototype.setUp=function(a){if((this.config=a)&&this.config.hasOwnProperty("extensions")){a=this.config.extensions;for(var b=0;b<a.length;++b)this.loadExtension(a[b],this.config)}};
Autodesk.Viewing.Viewer.prototype.tearDown=function(){for(var a in this.loadedExtensions)this.unloadExtension(a)};Autodesk.Viewing.Viewer.prototype.loadExtension=function(a,b){var c=!1;if(this.isExtensionLoaded(a))stderr("Extension already loaded: "+a);else{var e=Autodesk.Viewing.theExtensionManager.getExtension(a);if(e){if(e=new e(this,b),c=e.load())this.loadedExtensions[a]=e,stderr("Extension loaded: "+a)}else stderr("Extension not found: "+a)}return c};
Autodesk.Viewing.Viewer.prototype.isExtensionLoaded=function(a){return a in this.loadedExtensions};Autodesk.Viewing.Viewer.prototype.getExtension=function(a){return a in this.loadedExtensions?this.loadedExtensions[a]:null};Autodesk.Viewing.Viewer.prototype.unloadExtension=function(a){var b=!1;this.isExtensionLoaded(a)?(b=this.loadedExtensions[a].unload(),stderr("Extension unloaded: "+a),delete this.loadedExtensions[a]):stderr("Extension not found: "+a);return b};
Autodesk.Viewing.Viewer.prototype.localize=function(){Autodesk.Viewing.i18n.localize()};Autodesk.Viewing.Viewer.prototype.addEventListener=function(a,b){"undefined"==typeof this.listeners[a]&&(this.listeners[a]=[]);this.listeners[a].push(b)};Autodesk.Viewing.Viewer.prototype.hasEventListener=function(a,b){if(void 0===this.listeners)return!1;var c=this.listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1};
Autodesk.Viewing.Viewer.prototype.removeEventListener=function(a,b){if(this.listeners[a]instanceof Array)for(var c=this.listeners[a],e=0,d=c.length;e<d;e++)if(c[e]===b){c.splice(e,1);break}};Autodesk.Viewing.Viewer.prototype.fireEvent=function(a){"string"==typeof a&&(a={type:a});a.target||(a.target=this);if(!a.type)throw Error("event type unknown.");if(this.listeners[a.type]instanceof Array)for(var b=this.listeners[a.type].slice(),c=0;c<b.length;c++)b[c].call(this,a)};
Autodesk.Viewing.Viewer.prototype.getDimensions=function(){if(this.container){var a={};this.getScreenMode()===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen?(a.width=screen.width,a.height=screen.height):a=this.container.getBoundingClientRect();return{width:a.width,height:a.height}}return null};Autodesk.Viewing.Viewer.prototype.getState=function(a){throw"Implement getState() in derived class";};
Autodesk.Viewing.Viewer.prototype.restoreState=function(a,b,c){throw"Implement restoreState() in derived class";};Autodesk.Viewing.Viewer.prototype.setViewFromArray=function(a,b){};Autodesk.Viewing.Viewer.prototype.setViewFromViewBox=function(a,b){};Autodesk.Viewing.Viewer.prototype.setViewFromFile=function(){};Autodesk.Viewing.Viewer.prototype.resize=function(){this.resizePanels()};
Autodesk.Viewing.Viewer.prototype.addPanel=function(a){return-1===this.dockingPanels.indexOf(a)?(this.dockingPanels.push(a),!0):!1};Autodesk.Viewing.Viewer.prototype.removePanel=function(a){a=this.dockingPanels.indexOf(a);return-1<a?(this.dockingPanels.splice(a,1),!0):!1};
Autodesk.Viewing.Viewer.prototype.resizePanels=function(a){var b=a?a.viewer:null;b||(b=this);var c=a?a.dockingPanels:null;c||(c=b.dockingPanels);var e=b.container.getBoundingClientRect(),b=e.top,d=e.bottom,f=e.left,g=e.right,l;a&&a.dimensions?(l=a.dimensions.width,d=e=a.dimensions.height):(l=e.width,e=e.height);for(a=0;a<c.length;++a){var h=c[a].container,k=h.getBoundingClientRect(),m=k.top,m=k.bottom,p=k.left,p=k.right,r=k.width,k=k.height;if(r&&k){l<r&&(r=Math.round(l),h.style.width=r+"px");e<k&&
(k=Math.round(e),h.style.height=k+"px");if(g<p||h.dockRight)p=Math.round(g-r-f),h.style.left=p+"px";if(d<m||h.dockBottom)m=Math.round(d-k-b),0>m&&(m=0),h.style.top=m+"px";h.style.maxWidth=Math.round(l)+"px";h.style.maxHeight=Math.round(e)+"px"}}};Autodesk.Viewing.Viewer.prototype.search=function(a,b,c){};Autodesk.Viewing.Viewer.prototype.setContextMenu=function(a){this.contextMenu&&this.contextMenu.hide();this.contextMenu=a};
Autodesk.Viewing.Viewer.prototype.triggerContextMenu=function(a){return this.contextMenu&&this.preContextMenuShow(a)?(this.contextMenu.show(a),!0):!1};
Autodesk.Viewing.Viewer.prototype.initContextMenu=function(){function a(a){var c=a.button;"buttons"in a&&(!b.__firefoxLMBfix||a.buttons&1?2===c&&a.buttons&1&&(c=0,b.__firefoxLMBfix=!0):(b.__firefoxLMBfix=!1,c=0));a=b.navigation&&b.navigation.getUseLeftHandedInput()?0:2;return c===a?!0:!1}var b=this,c=this.canvas||this.container;c.addEventListener("mousedown",function(c){a(c)&&(b.startX=c.clientX,b.startY=c.clientY)});c.addEventListener("mouseup",function(c){a(c)&&c.clientX===b.startX&&c.clientY===
b.startY&&b.triggerContextMenu(c);return!0},!1)};Autodesk.Viewing.Viewer.prototype.preContextMenuShow=function(a){return!0};Autodesk.Viewing.Viewer.prototype.registerContextMenuCallback=function(a,b){this.contextMenuCallbacks[a]=b};Autodesk.Viewing.Viewer.prototype.unregisterContextMenuCallback=function(a){return a in this.contextMenuCallbacks?(delete this.contextMenuCallbacks[a],!0):!1};
Autodesk.Viewing.Viewer.prototype.runContextMenuCallbacks=function(a,b){for(var c in this.contextMenuCallbacks)if(this.contextMenuCallbacks.hasOwnProperty(c))this.contextMenuCallbacks[c](a,b)};Autodesk.Viewing.Viewer.ScreenMode={kNormal:0,kFullBrowser:1,kFullScreen:2};Autodesk.Viewing.Viewer.prototype.ScreenMode={kNormal:0,kFullBrowser:1,kFullScreen:2};
Autodesk.Viewing.Viewer.prototype.setScreenModeDelegate=function(a){this.screenModeDelegate&&(this.screenModeDelegate.uninitialize(),this.screenModeDelegate=null);this.screenModeDelegateClass=a?a:null===a?Autodesk.Viewing.NullScreenModeDelegate:Autodesk.Viewing.ViewerScreenModeDelegate};Autodesk.Viewing.Viewer.prototype.getScreenModeDelegate=function(){this.screenModeDelegate||(this.screenModeDelegate=new this.screenModeDelegateClass(this));return this.screenModeDelegate};
Autodesk.Viewing.Viewer.prototype.isScreenModeSupported=function(a){return this.getScreenModeDelegate().isModeSupported(a)};Autodesk.Viewing.Viewer.prototype.canChangeScreenMode=function(){return this.isScreenModeSupported(Autodesk.Viewing.Viewer.prototype.kNormal)};Autodesk.Viewing.Viewer.prototype.setScreenMode=function(a){return this.getScreenModeDelegate().setMode(a)};Autodesk.Viewing.Viewer.prototype.getScreenMode=function(){return this.getScreenModeDelegate().getMode()};
Autodesk.Viewing.Viewer.prototype.nextScreenMode=function(){var a=this.getScreenModeDelegate().getNextMode();return void 0!==a?this.setScreenMode(a):!1};Autodesk.Viewing.Viewer.prototype.escapeScreenMode=function(){var a=this.getScreenModeDelegate().getEscapeMode();return void 0!==a?this.setScreenMode(a):!1};
Autodesk.Viewing.ScreenModeDelegate=function(a){this.viewer=a;this.bindFullscreenEventListener=this.fullscreenEventListener.bind(this);this.getMode()===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen&&(document.addEventListener("fullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("mozfullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("webkitfullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("MSFullscreenChange",
this.bindFullscreenEventListener,!1))};Autodesk.Viewing.ScreenModeDelegate.prototype.uninitialize=function(){document.removeEventListener("fullscreenchange",this.bindFullscreenEventListener,!1);document.removeEventListener("mozfullscreenchange",this.bindFullscreenEventListener,!1);document.removeEventListener("webkitfullscreenchange",this.bindFullscreenEventListener,!1);document.removeEventListener("MSFullscreenChange",this.bindFullscreenEventListener,!1);this.viewer=null};
Autodesk.Viewing.ScreenModeDelegate.prototype.isModeSupported=function(a){return!0};Autodesk.Viewing.ScreenModeDelegate.prototype.setMode=function(a){var b=this.getMode();if(a!==b&&this.isModeSupported(a)){this.doScreenModeChange(b,a);if(b!==Autodesk.Viewing.Viewer.ScreenMode.kFullScreen)this.onScreenModeChanged(b,a);return!0}return!1};Autodesk.Viewing.ScreenModeDelegate.prototype.getMode=function(){throw"Implement getMode() in derived class";};
Autodesk.Viewing.ScreenModeDelegate.prototype.getNextMode=function(){var a=this.getMode(),b;a===Autodesk.Viewing.Viewer.ScreenMode.kNormal&&this.isModeSupported(Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser)?b=Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser:a===Autodesk.Viewing.Viewer.ScreenMode.kNormal&&this.isModeSupported(Autodesk.Viewing.Viewer.ScreenMode.kFullScreen)?b=Autodesk.Viewing.Viewer.ScreenMode.kFullScreen:a===Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser&&this.isModeSupported(Autodesk.Viewing.Viewer.ScreenMode.kFullScreen)?
b=Autodesk.Viewing.Viewer.ScreenMode.kFullScreen:a===Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser&&this.isModeSupported(Autodesk.Viewing.Viewer.ScreenMode.kNormal)?b=Autodesk.Viewing.Viewer.ScreenMode.kNormal:a===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen&&this.isModeSupported(Autodesk.Viewing.Viewer.ScreenMode.kNormal)?b=Autodesk.Viewing.Viewer.ScreenMode.kNormal:a===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen&&this.isModeSupported(Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser)&&(b=Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser);
return b};Autodesk.Viewing.ScreenModeDelegate.prototype.getEscapeMode=function(){return this.getMode()!==Autodesk.Viewing.Viewer.ScreenMode.kNormal?Autodesk.Viewing.Viewer.ScreenMode.kNormal:void 0};Autodesk.Viewing.ScreenModeDelegate.prototype.fullscreenEventListener=function(){if(inFullscreen())this.viewer.resize();else{var a=Autodesk.Viewing.Viewer.ScreenMode;this.doScreenModeChange(a.kFullScreen,a.kNormal);this.onScreenModeChanged(a.kFullScreen,a.kNormal)}};
Autodesk.Viewing.ScreenModeDelegate.prototype.doScreenModeChange=function(a,b){throw"Implement doScreenModeChange() in derived class";};
Autodesk.Viewing.ScreenModeDelegate.prototype.onScreenModeChanged=function(a,b){a===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen?(document.removeEventListener("fullscreenchange",this.bindFullscreenEventListener,!1),document.removeEventListener("mozfullscreenchange",this.bindFullscreenEventListener,!1),document.removeEventListener("webkitfullscreenchange",this.bindFullscreenEventListener,!1),document.removeEventListener("MSFullscreenChange",this.bindFullscreenEventListener,!1)):b===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen&&
(document.addEventListener("fullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("mozfullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("webkitfullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("MSFullscreenChange",this.bindFullscreenEventListener,!1));this.viewer.resize();this.viewer.fireEvent({type:Autodesk.Viewing.FULLSCREEN_MODE_EVENT,mode:b})};
Autodesk.Viewing.ViewerScreenModeDelegate=function(a){Autodesk.Viewing.ScreenModeDelegate.call(this,a)};Autodesk.Viewing.ViewerScreenModeDelegate.prototype=Object.create(Autodesk.Viewing.ScreenModeDelegate.prototype);Autodesk.Viewing.ViewerScreenModeDelegate.prototype.constructor=Autodesk.Viewing.ViewerScreenModeDelegate;
Autodesk.Viewing.ViewerScreenModeDelegate.prototype.getMode=function(){return inFullscreen()&&fullscreenElement()===this.viewer.container?Autodesk.Viewing.Viewer.ScreenMode.kFullScreen:this.viewer.container.classList.contains("viewer-fill-browser")?Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser:Autodesk.Viewing.Viewer.ScreenMode.kNormal};Autodesk.Viewing.ViewerScreenModeDelegate.prototype.isModeSupported=function(a){return a===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen?!isIOSDevice():!0};
Autodesk.Viewing.ViewerScreenModeDelegate.prototype.doScreenModeChange=function(a,b){var c=this.viewer.container;switch(b){case Autodesk.Viewing.Viewer.ScreenMode.kNormal:c.classList.remove("viewer-fill-browser");exitFullscreen();break;case Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser:c.classList.add("viewer-fill-browser");break;case Autodesk.Viewing.Viewer.ScreenMode.kFullScreen:c.classList.add("viewer-fill-browser"),launchFullscreen(c)}};
Autodesk.Viewing.ApplicationScreenModeDelegate=function(a){Autodesk.Viewing.ScreenModeDelegate.call(this,a)};Autodesk.Viewing.ApplicationScreenModeDelegate.prototype=Object.create(Autodesk.Viewing.ScreenModeDelegate.prototype);Autodesk.Viewing.ApplicationScreenModeDelegate.prototype.constructor=Autodesk.Viewing.ApplicationScreenModeDelegate;Autodesk.Viewing.ApplicationScreenModeDelegate.prototype.isModeSupported=function(a){return a!==Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser};
Autodesk.Viewing.ApplicationScreenModeDelegate.prototype.getMode=function(){return inFullscreen()&&fullscreenElement()===document.documentElement?Autodesk.Viewing.Viewer.ScreenMode.kFullScreen:Autodesk.Viewing.Viewer.ScreenMode.kNormal};Autodesk.Viewing.ApplicationScreenModeDelegate.prototype.doScreenModeChange=function(a,b){b===Autodesk.Viewing.Viewer.ScreenMode.kNormal?exitFullscreen():b===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen&&launchFullscreen(document.documentElement)};
Autodesk.Viewing.NullScreenModeDelegate=function(a){Autodesk.Viewing.ScreenModeDelegate.call(this,a)};Autodesk.Viewing.NullScreenModeDelegate.prototype=Object.create(Autodesk.Viewing.ScreenModeDelegate.prototype);Autodesk.Viewing.NullScreenModeDelegate.prototype.constructor=Autodesk.Viewing.ScreenModeDelegate;Autodesk.Viewing.NullScreenModeDelegate.prototype.isModeSupported=function(a){return!1};Autodesk.Viewing.NullScreenModeDelegate.prototype.getMode=function(){return Autodesk.Viewing.Viewer.ScreenMode.kNormal};
AutodeskNamespace("Autodesk.Viewing");Autodesk.Viewing.ErrorCodes={UNKNOWN_FAILURE:1,BAD_DATA:2,NETWORK_FAILURE:3,NETWORK_ACCESS_DENIED:4,NETWORK_FILE_NOT_FOUND:5,NETWORK_SERVER_ERROR:6,NETWORK_UNHANDLED_RESPONSE_CODE:7,BROWSER_WEBGL_NOT_SUPPORTED:8,BAD_DATA_NO_VIEWABLE_CONTENT:9,BROWSER_WEBGL_DISABLED:10};var ENABLE_OCTM_MG2=!1,IS_WORKER="undefined"!==typeof self&&"undefined"===typeof window;
if(IS_WORKER){var f2d=null;IS_CONCAT_BUILD||(importScripts("../AutodeskNamespace.js"),importScripts("../compatibility.js"),importScripts("../../thirdparty/three.js/LmvMatrix4.js"),importScripts("../lmvtk/gunzip.min.js"),importScripts("../lmvtk/unzip.min.js"),ENABLE_OCTM_MG2&&(importScripts("../lmvtk/inflate.min.js"),importScripts("../lmvtk/octm_mg2.js")),importScripts("../lmvtk/InputStream.js"),importScripts("../lmvtk/VbUtils.js"),importScripts("../lmvtk/VertexBufferBuilder.js"),importScripts("../lmvtk/PackReader.js"),
importScripts("../lmvtk/Geoms.js"),importScripts("../lmvtk/Materials.js"),importScripts("../lmvtk/Lights.js"),importScripts("../lmvtk/Cameras.js"),importScripts("../lmvtk/Fragments.js"),importScripts("../lmvtk/Instances.js"),importScripts("../lmvtk/Package.js"),importScripts("../lmvtk/PackReader.js"),importScripts("../lmvtk/Propdb.js"),importScripts("../lmvtk/F2d.js"),importScripts("../lmvtk/F2dProbe.js"),importScripts("../lmvtk/CheckedInputStream.js"),importScripts("../net/Xhr.js"),importScripts("GeomWorker.js"),
importScripts("SvfWorker.js"),importScripts("PropWorker.js"),importScripts("F2dParseWorker.js"),importScripts("F2dStreamWorker.js"),importScripts("CloudRenderingWorker.js"),importScripts("../application/Viewer.js"),importScripts("../ErrorCodes.js"));self.addEventListener("message",function(a){var b=a.data;if(b.hasOwnProperty("operation")){b.basePath="";if(b.url){var c=b.url.lastIndexOf("/");-1!=c&&(b.basePath=b.url.substr(0,c+1))}b.onFailureCallback=function(a,c,b){403==a?self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_ACCESS_DENIED,
"Access denied to remote resource",{url:b.url,httpStatus:a,httpStatusText:c}):404==a?self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_FILE_NOT_FOUND,"Remote resource not found",{url:b.url,httpStatus:a,httpStatusText:c}):500<=a&&600>a?self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_SERVER_ERROR,"Server error when accessing resource",{url:b.url,httpStatus:a,httpStatusText:c}):b.exception?self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_FAILURE,"Network failure",{url:b.url,exception:b.exception.toString(),
stack:b.exception.stack}):self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_UNHANDLED_RESPONSE_CODE,"Unhandled response code from server",{url:b.url,httpStatus:a,httpStatusText:c})};b.errorHandler=new XhrErrorHandler(self);a=a.data.operation;"LOAD_GEOMETRY"==a?doGeomLoad(self,b):"LOAD_SVF"==a?doLoadSvf(self,b):"GET_PROPERTIES"==a?doPropertyGet(self,b):"SEARCH_PROPERTIES"==a?doPropertySearch(self,b):"GET_OBJECT_TREE"==a?doObjectTreeParse(self,b):"PARSE_F2D"==a?doParseF2D(self,b):"PARSE_F2D_FRAME"==
a?doParseF2DFrame(self,b):"STREAM_F2D"==a?doStreamF2D(self,b):"CLOUD_RENDERING"==a?doCloudRendering(self,b):"SVF_TO_SPD"==a&&doSvfToSpd(self,b)}},!1);self.raiseError=function(a,b,c){self.postMessage({error:{code:a,msg:b,args:c}})};var debug=function(a){self.postMessage({debug:1,message:a})}};
